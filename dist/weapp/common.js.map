{"version":3,"file":"common.js","sources":["webpack:///._src_api_index.js","webpack:///._src_utils_util.js"],"sourcesContent":["import { request } from \"../utils/util\";\nconst baseUrl = \"https://tapi.cupz.cn\";\n// WX登录,拿code换登录\nexport const wxlogin = (data) => {\n  return request({\n    url: baseUrl + \"/v1/token\",\n    method: \"POST\",\n    data,\n  });\n};\n// 获取手机号码\nexport const getPhone = (data) => {\n  return request({\n    url: baseUrl + \"/v1/phone\",\n    method: \"POST\",\n    data,\n  });\n};\n","export const formatTime = (date) => {\n  const year = date.getFullYear();\n  const month = date.getMonth() + 1;\n  const day = date.getDate();\n  const hour = date.getHours();\n  const minute = date.getMinutes();\n  const second = date.getSeconds();\n\n  return (\n    [year, month, day].map(formatNumber).join(\"/\") +\n    \" \" +\n    [hour, minute, second].map(formatNumber).join(\":\")\n  );\n};\n\nexport const formatNumber = (n) => {\n  n = n.toString();\n  return n[1] ? n : \"0\" + n;\n};\n\nexport const openPage = (url) => {\n  console.log(\"open page:\", url);\n  wx.navigateTo({\n    url: url,\n  });\n};\n\nexport const timeformat = function (date, fmt) {\n  fmt = fmt || \"yyyy-MM-dd HH:mm:ss\";\n  const o = {\n    \"M+\": date.getMonth() + 1, // 月份\n    \"d+\": date.getDate(), // 日\n    \"h+\": date.getHours() % 12 === 0 ? 12 : date.getHours() % 12, // 小时\n    \"H+\": date.getHours(), // 小时\n    \"m+\": date.getMinutes(), // 分\n    \"s+\": date.getSeconds(), // 秒\n    \"q+\": Math.floor((date.getMonth() + 3) / 3), // 季度\n    S: date.getMilliseconds(), // 毫秒\n  };\n  const week = {\n    0: \"/u65e5\",\n    1: \"/u4e00\",\n    2: \"/u4e8c\",\n    3: \"/u4e09\",\n    4: \"/u56db\",\n    5: \"/u4e94\",\n    6: \"/u516d\",\n  };\n  if (/(y+)/.test(fmt)) {\n    fmt = fmt.replace(\n      RegExp.$1,\n      (date.getFullYear() + \"\").substr(4 - RegExp.$1.length)\n    );\n  }\n  if (/(E+)/.test(fmt)) {\n    fmt = fmt.replace(\n      RegExp.$1,\n      (RegExp.$1.length > 1\n        ? RegExp.$1.length > 2\n          ? \"/u661f/u671f\"\n          : \"/u5468\"\n        : \"\") + week[date.getDay() + \"\"]\n    );\n  }\n  for (const k in o) {\n    if (new RegExp(\"(\" + k + \")\").test(fmt)) {\n      fmt = fmt.replace(\n        RegExp.$1,\n        RegExp.$1.length === 1 ? o[k] : (\"00\" + o[k]).substr((\"\" + o[k]).length)\n      );\n    }\n  }\n  return fmt;\n};\n\n// header拦截 wx.getStorageSync('token')\nexport const request = (params) => {\n  let oheader = {\n    header: {\n      token: wx.getStorageSync(\"token\") || \"\",\n    },\n  };\n  let data = Object.assign(oheader, params);\n  return new Promise((resolev, reject) => {\n    wx.request({\n      ...data,\n      url: params.url,\n      success: (res) => {\n        if (res.statusCode == 200) {\n          resolev(res);\n        } else {\n          reject(res);\n        }\n      },\n      fail: (err) => {\n        reject(err);\n      },\n    });\n  });\n};\n\nexport const errortip = (txt) => {\n  wx.showToast({\n    title: txt,\n    icon: \"error\",\n    duration: 2000,\n  });\n};\n"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;;;;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAKA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AATA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AAQA;AACA;AAIA;AACA;AAAA;AACA;AAQA;AACA;AAAA;AACA;AACA;AAIA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AADA;AAKA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AAcA;AACA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;;;;A","sourceRoot":""}