{"version":3,"file":"packageActivity/pages/comment/index.js","sources":["webpack:///./src/packageActivity/pages/comment/index.vue?cad9","webpack:///index.vue","webpack:///./src/packageActivity/pages/comment/index.vue?64eb","webpack:///._src_packageActivity_pages_comment_index.scss","webpack:///._src_packageActivity_pages_comment_index.vue","webpack:///./src/packageActivity/pages/comment/index.vue?c979","webpack:///./src/packageActivity/pages/comment/index.vue?e8b0"],"sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=cb7ec098&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"cb7ec098\",\n  \"b4a454b4\"\n  \n)\n\ncomponent.options.__file = \"src/packageActivity/pages/comment/index.vue\"\nexport default component.exports","<template>\n  <view class=\"comment\">\n    <view class=\"comment-list\">\n      <view\n        class=\"comment-item\"\n        v-for=\"(item, index) in commentList\"\n        :key=\"index\"\n      >\n        <view class=\"comment-box\">\n          <view class=\"comment-top\">\n            <view class=\"comment-box-left\">\n              <image :src=\"item.comment_avatar\"></image>\n            </view>\n            <view class=\"comment-box-rt\">\n              <view class=\"comment-name\"> {{ item.comment_nickname }} </view>\n              <view class=\"comment-ct\">\n                <i-rate\n                  class=\"evaluate-rate\"\n                  :size=\"16\"\n                  :value=\"item.score\"\n                  :key=\"index\"\n                >\n                </i-rate>\n              </view>\n            </view>\n          </view>\n          <view class=\"comment-bt\">\n            <view class=\"comment-txt\"> {{ item.content }} </view>\n            <view class=\"comment-date\">{{ item.create_at }} </view>\n          </view>\n        </view>\n        <view\n          class=\"comment-box child-comment\"\n          v-for=\"(descendantsItem, descendantsIndex) in item.descendants\"\n          :key=\"descendantsIndex\"\n        >\n          <view class=\"comment-top\">\n            <view class=\"comment-box-left\">\n              <image :src=\"descendantsItem.body.comment_avatar\"></image>\n            </view>\n            <view class=\"comment-box-rt\">\n              <view class=\"comment-name\">\n                {{ descendantsItem.body.comment_nickname }}\n              </view>\n              <view class=\"comment-ct\">\n                <block v-if=\"descendantsItem.parent.comment_nickname\">\n                  <view class=\"comment-txt\"> 回复 </view>\n                  <view class=\"comment-reply-nickname\">{{\n                    descendantsItem.parent.comment_nickname\n                  }}</view>\n                </block>\n                <view class=\"comment-txt\"\n                  ><i-rate\n                    class=\"evaluate-rate\"\n                    :size=\"16\"\n                    :value=\"item.score\"\n                    :key=\"index\"\n                  >\n                  </i-rate\n                ></view>\n              </view>\n            </view>\n          </view>\n          <view class=\"comment-bt\">\n            <view class=\"comment-txt\">\n              {{ descendantsItem.body.content }}\n            </view>\n            <view class=\"comment-date\">\n              {{ descendantsItem.body.create_at }}</view\n            >\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport \"./index.scss\";\nimport { comment } from \"../../../api/index.js\";\nexport default {\n  name: \"comment\",\n  data() {\n    return {\n      pid: \"\",\n      commentList: [],\n      commentTotal: 0,\n      pageNum: 1,\n      pageSize: 10,\n      loading: true,\n    };\n  },\n  methods: {\n    // 加载更多\n    onMore() {\n      //在当前页面显示导航条加载动画\n      wx.showNavigationBarLoading();\n      //显示 loading 提示框。需主动调用 wx.hideLoading 才能关闭提示框\n      wx.showLoading({\n        title: \"数据加载中...\",\n      });\n      this.loading = false;\n      this.query(\"more\");\n    },\n    query(type) {\n      if (type == \"init\") this.pageNum = 1;\n      this.comment(\n        {\n          partner_pid: this.pid,\n          page: this.pageNum,\n          per_page: this.pageSize,\n        },\n        type\n      );\n    },\n    async comment(params, type) {\n      try {\n        let res = await comment(params);\n        //隐藏loading 提示框\n        wx.hideLoading();\n\n        //隐藏导航条加载动画\n        wx.hideNavigationBarLoading();\n        //停止下拉刷新\n        wx.stopPullDownRefresh();\n\n        if (type == \"init\") {\n          this.commentList = res.data.data.items;\n          this.loading = true;\n        } else if (type == \"more\") {\n          if (!res.data.data || !res.data.data.items.length) {\n            errortip(\"没有更多数据了～\");\n            this.loading = true;\n            return false;\n          }\n          let data = res.data.data.items;\n          this.commentList = this.commentList.concat(data);\n          this.loading = true;\n        }\n      } catch (error) {}\n    },\n  },\n  onPullDownRefresh: function () {\n    this.query(\"init\");\n  },\n  onReachBottom: function () {\n    console.log(\"下拉加载更多\", this.loading);\n    this.pageNum++;\n    if (this.loading) {\n      this.onMore();\n    }\n  },\n  onLoad: function (options) {\n    if (options.pid) {\n      this.pid = options.pid;\n      this.query(\"init\");\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", { staticClass: \"comment\" }, [\n    _c(\n      \"view\",\n      { staticClass: \"comment-list\" },\n      _vm._l(_vm.commentList, function (item, index) {\n        return _c(\n          \"view\",\n          { key: index, staticClass: \"comment-item\" },\n          [\n            _c(\"view\", { staticClass: \"comment-box\" }, [\n              _c(\"view\", { staticClass: \"comment-top\" }, [\n                _c(\"view\", { staticClass: \"comment-box-left\" }, [\n                  _c(\"image\", { attrs: { src: item.comment_avatar } }),\n                ]),\n                _c(\"view\", { staticClass: \"comment-box-rt\" }, [\n                  _c(\"view\", { staticClass: \"comment-name\" }, [\n                    _vm._v(\" \" + _vm._s(item.comment_nickname) + \" \"),\n                  ]),\n                  _c(\n                    \"view\",\n                    { staticClass: \"comment-ct\" },\n                    [\n                      _c(\"i-rate\", {\n                        key: index,\n                        staticClass: \"evaluate-rate\",\n                        attrs: { size: 16, value: item.score },\n                      }),\n                    ],\n                    1\n                  ),\n                ]),\n              ]),\n              _c(\"view\", { staticClass: \"comment-bt\" }, [\n                _c(\"view\", { staticClass: \"comment-txt\" }, [\n                  _vm._v(\" \" + _vm._s(item.content) + \" \"),\n                ]),\n                _c(\"view\", { staticClass: \"comment-date\" }, [\n                  _vm._v(_vm._s(item.create_at) + \" \"),\n                ]),\n              ]),\n            ]),\n            _vm._l(\n              item.descendants,\n              function (descendantsItem, descendantsIndex) {\n                return _c(\n                  \"view\",\n                  {\n                    key: descendantsIndex,\n                    staticClass: \"comment-box child-comment\",\n                  },\n                  [\n                    _c(\"view\", { staticClass: \"comment-top\" }, [\n                      _c(\"view\", { staticClass: \"comment-box-left\" }, [\n                        _c(\"image\", {\n                          attrs: { src: descendantsItem.body.comment_avatar },\n                        }),\n                      ]),\n                      _c(\"view\", { staticClass: \"comment-box-rt\" }, [\n                        _c(\"view\", { staticClass: \"comment-name\" }, [\n                          _vm._v(\n                            \" \" +\n                              _vm._s(descendantsItem.body.comment_nickname) +\n                              \" \"\n                          ),\n                        ]),\n                        _c(\n                          \"view\",\n                          { staticClass: \"comment-ct\" },\n                          [\n                            descendantsItem.parent.comment_nickname\n                              ? _c(\"block\", [\n                                  _c(\"view\", { staticClass: \"comment-txt\" }, [\n                                    _vm._v(\" 回复 \"),\n                                  ]),\n                                  _c(\n                                    \"view\",\n                                    { staticClass: \"comment-reply-nickname\" },\n                                    [\n                                      _vm._v(\n                                        _vm._s(\n                                          descendantsItem.parent\n                                            .comment_nickname\n                                        )\n                                      ),\n                                    ]\n                                  ),\n                                ])\n                              : _vm._e(),\n                            _c(\n                              \"view\",\n                              { staticClass: \"comment-txt\" },\n                              [\n                                _c(\"i-rate\", {\n                                  key: index,\n                                  staticClass: \"evaluate-rate\",\n                                  attrs: { size: 16, value: item.score },\n                                }),\n                              ],\n                              1\n                            ),\n                          ],\n                          1\n                        ),\n                      ]),\n                    ]),\n                    _c(\"view\", { staticClass: \"comment-bt\" }, [\n                      _c(\"view\", { staticClass: \"comment-txt\" }, [\n                        _vm._v(\n                          \" \" + _vm._s(descendantsItem.body.content) + \" \"\n                        ),\n                      ]),\n                      _c(\"view\", { staticClass: \"comment-date\" }, [\n                        _vm._v(\" \" + _vm._s(descendantsItem.body.create_at)),\n                      ]),\n                    ]),\n                  ]\n                )\n              }\n            ),\n          ],\n          2\n        )\n      }),\n      0\n    ),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {\"navigationBarTitleText\":\"评论列表\",\"enablePullDownRefresh\":true,\"component\":true,\"usingComponents\":{\"i-rate\":\"../../../assets/iview-weapp/dist/rate/index\"}};\n\n\nvar inst = Page(createPageConfig(component, 'packageActivity/pages/comment/index', {root:{cn:[]}}, config || {}))\n\n\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=cb7ec098&scoped=true&\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAOA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAVA;AAAA;AAAA;AAAA;AACA;AAWA;AACA;AAbA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAeA;AACA;AAjBA;AACA;AADA;AAoBA;AACA;AACA;AACA;AAvBA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBA;AAhDA;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7EA;;;;;;;;;;;;;AChFA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrIA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}