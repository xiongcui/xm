{"version":3,"file":"packageActivity/pages/application/index.js","sources":["webpack:///./src/packageActivity/pages/application/index.vue?392a","webpack:///index.vue","webpack:///./src/packageActivity/pages/application/index.vue?26ad","webpack:///._src_packageActivity_pages_application_index.scss","webpack:///._src_packageActivity_pages_application_index.vue","webpack:///./src/packageActivity/pages/application/index.vue?992c","webpack:///./src/packageActivity/pages/application/index.vue?47ec"],"sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=45907065&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"45907065\",\n  \"6aa54552\"\n  \n)\n\ncomponent.options.__file = \"src/packageActivity/pages/application/index.vue\"\nexport default component.exports","<template>\n  <view class=\"application\">\n    <view class=\"application-info\">\n      <view class=\"application-info-top\">\n        <view class=\"application-title\"> {{ title }} </view>\n        <view class=\"application-bt\">\n          <view class=\"application-loction\">\n            <image\n              src=\"https://yuepai-oss.qubeitech.com/static/images/common/local.png\"\n            ></image>\n            {{ address }}\n          </view>\n          <view class=\"application-time\">\n            <image\n              src=\"https://yuepai-oss.qubeitech.com/static/images/time.png\"\n            ></image>\n            {{ begin_datetime }}\n          </view>\n          <view class=\"application-price\">\n            ¥<text class=\"price\">{{ original_amount }}</text\n            >元\n          </view>\n        </view>\n      </view>\n      <view class=\"application-info-bt\">\n        <view class=\"application-item\">\n          <view class=\"application-label\"> 场景 </view>\n          <view class=\"application-content-none\"> {{ scene }}</view>\n        </view>\n        <view class=\"application-item\" v-if=\"role\">\n          <view class=\"application-label\"> 角色 </view>\n          <view class=\"application-content-none\"> {{ role }}</view>\n        </view>\n      </view>\n    </view>\n    <view class=\"application-cost\">\n      <!-- <view class=\"application-item\">\n        <view class=\"application-label\"> 报名费用 </view>\n        <view class=\"application-content\"> ¥ 100.00</view>\n      </view> -->\n      <view\n        class=\"application-item\"\n        v-for=\"(item, index) in expense_details\"\n        :key=\"index\"\n      >\n        <view class=\"application-label\">\n          {{ item.name }}\n          <view class=\"application-tag\" v-if=\"item.tips\">\n            {{ item.tips }}\n          </view>\n        </view>\n        <view class=\"application-content\"> ¥ {{ item.amount }}</view>\n      </view>\n      <!-- <view class=\"application-item\">\n        <view class=\"application-label\"> 早鸟优惠 </view>\n        <view class=\"application-content\"> - ¥ 20.00</view>\n      </view>\n      <view class=\"application-item\">\n        <view class=\"application-label\"> 特享优惠 </view>\n        <view class=\"application-content\"> - ¥ 20.00</view>\n      </view> -->\n      <view class=\"application-split\"></view>\n      <view class=\"application-item\">\n        <view class=\"application-label blod\"> 实际支付 </view>\n        <view class=\"application-content price-style\">\n          ¥{{ actual_payment }}</view\n        >\n      </view>\n    </view>\n    <view class=\"payment\">\n      <!-- <view class=\"application-item\">\n        <view class=\"application-label\">微信支付 </view>\n        <view class=\"application-content\">\n          <view\n            @tap=\"choosePayment\"\n            class=\"check_box\"\n            :class=\"payment === 1 ? 'check_box_ed' : ''\"\n            data-status=\"1\"\n          >\n            <image\n              :src=\"`https://yuepai-oss.qubeitech.com/static/images/common/select2_${\n                payment === 1 ? 1 : 0\n              }.png`\"\n            ></image>\n          </view>\n        </view>\n      </view> -->\n      <view\n        class=\"application-item\"\n        v-for=\"(item, index) in payment_method\"\n        :key=\"index\"\n      >\n        <view class=\"application-label\">\n          {{ item.method }}\n          <!-- <text class=\"balance\">金币余额20</text> -->\n        </view>\n        <view class=\"application-content\">\n          <view\n            @tap=\"choosePayment(index)\"\n            class=\"check_box\"\n            :class=\"item.is_select === 1 ? 'check_box_ed' : ''\"\n          >\n            <image\n              :src=\"`https://yuepai-oss.qubeitech.com/static/images/common/select2_${\n                item.is_select === 1 ? 1 : 0\n              }.png`\"\n            ></image>\n          </view>\n        </view>\n      </view>\n    </view>\n    <view\n      class=\"application-fixed\"\n      :class=\"isIphoneX ? 'fix-iphonex-button' : ''\"\n    >\n      <view class=\"application-fixed-left\">\n        <view class=\"application-fixed-price\"> ¥{{ actual_payment }} </view>\n        <view class=\"reduction\">共减免¥{{ reduce_payment }}</view>\n      </view>\n      <view class=\"application-fixed-rt\" @tap=\"confirmPayment\"> 确认支付 </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport \"./index.scss\";\nimport { sceneInfo, applicationPay, applyResult } from \"../../../api/index.js\";\nimport { openPage } from \"../../../utils/util\";\nimport clickThrottle from \"../../../utils/clickThrottle\";\nexport default {\n  name: \"application\",\n  data() {\n    return {\n      isIphoneX: false,\n      message: \"\",\n      payment: 1,\n      scene_oid: \"\",\n      teams_oid: \"\",\n      title: \"\",\n      address: \"\",\n      begin_datetime: \"\",\n      actual_payment: \"\",\n      expense_details: [],\n      payment_method: [],\n      original_amount: \"\",\n      reduce_payment: \"\",\n      scene: \"\",\n      role: \"\",\n      service: \"\",\n      apply_wait: \"\",\n      roles_oid: \"\",\n    };\n  },\n  created() {\n    this.isIphoneX = this.globalData.isIphoneX;\n  },\n  methods: {\n    choosePayment(index) {\n      this.payment_method.map((item) => {\n        item.is_select = 0;\n      });\n      this.payment_method[index].is_select = !this.payment_method[index]\n        .is_select\n        ? 1\n        : 0;\n    },\n    confirmPayment() {\n      if (!clickThrottle()) return;\n      let params = {\n        roles_oid: this.roles_oid,\n      };\n      if (this.apply_wait) {\n        params.apply_wait = this.apply_wait;\n      }\n      this.applicationPay(params);\n    },\n    async sceneInfo(params) {\n      try {\n        let res = await sceneInfo(params);\n        this.title = res.data.data.topic.title;\n        this.scene = res.data.data.selected.scene_name;\n        this.role = res.data.data.selected.roles_name\n          ? res.data.data.selected.roles_name\n          : \"\";\n        this.original_amount = res.data.data.topic.original_amount.amount;\n        this.address = res.data.data.topic.address;\n        this.begin_datetime = res.data.data.topic.begin_datetime;\n        this.actual_payment = res.data.data.expense.details.actual_amount;\n        this.reduce_payment = res.data.data.expense.details.reduce_amount;\n        this.expense_details = res.data.data.expense.details.details;\n        this.payment_method = res.data.data.payment_method;\n      } catch (error) {}\n    },\n    async applicationPay(params) {\n      try {\n        let res = await applicationPay(params);\n        let data = res.data.data;\n        if (data.pay_type == \"wx_pay\") {\n          let _this = this;\n          wx.requestPayment({\n            timeStamp: data.req_data.result.timeStamp,\n            nonceStr: data.req_data.result.nonceStr,\n            package: data.req_data.result.package,\n            signType: data.req_data.result.signType,\n            paySign: data.req_data.result.paySign,\n            success: function (res) {\n              console.log(res, \"成功了\");\n              _this.applyResult({\n                roles_oid: _this.roles_oid,\n              });\n            },\n            fail: function (res) {},\n            complete: function (res) {},\n          });\n        } else if (data.pay_type == \"no_pay\") {\n          this.applyResult({\n            roles_oid: this.roles_oid,\n          });\n        }\n      } catch (error) {}\n    },\n    async applyResult(params) {\n      wx.showLoading({\n        title: \"正在提交中...\",\n      });\n      try {\n        let res = await applyResult(params);\n        wx.hideLoading();\n        openPage(\n          \"/packageActivity/pages/applicationConfirm/index?result=\" +\n            res.data.data.result +\n            \"&desc=\" +\n            res.data.data.desc +\n            \"&wechat_qrc=\" +\n            res.data.data.wechat_qrc\n        );\n      } catch (error) {}\n    },\n  },\n  onLoad: function (options) {\n    if (options.roles_oid) {\n      this.roles_oid = options.roles_oid;\n      this.sceneInfo({\n        roles_oid: this.roles_oid,\n      });\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", { staticClass: \"application\" }, [\n    _c(\"view\", { staticClass: \"application-info\" }, [\n      _c(\"view\", { staticClass: \"application-info-top\" }, [\n        _c(\"view\", { staticClass: \"application-title\" }, [\n          _vm._v(\" \" + _vm._s(_vm.title) + \" \"),\n        ]),\n        _c(\"view\", { staticClass: \"application-bt\" }, [\n          _c(\"view\", { staticClass: \"application-loction\" }, [\n            _c(\"image\", {\n              attrs: {\n                src: \"https://yuepai-oss.qubeitech.com/static/images/common/local.png\",\n              },\n            }),\n            _vm._v(\" \" + _vm._s(_vm.address) + \" \"),\n          ]),\n          _c(\"view\", { staticClass: \"application-time\" }, [\n            _c(\"image\", {\n              attrs: {\n                src: \"https://yuepai-oss.qubeitech.com/static/images/time.png\",\n              },\n            }),\n            _vm._v(\" \" + _vm._s(_vm.begin_datetime) + \" \"),\n          ]),\n          _c(\"view\", { staticClass: \"application-price\" }, [\n            _vm._v(\" ¥\"),\n            _c(\"text\", { staticClass: \"price\" }, [\n              _vm._v(_vm._s(_vm.original_amount)),\n            ]),\n            _vm._v(\"元 \"),\n          ]),\n        ]),\n      ]),\n      _c(\"view\", { staticClass: \"application-info-bt\" }, [\n        _c(\"view\", { staticClass: \"application-item\" }, [\n          _c(\"view\", { staticClass: \"application-label\" }, [_vm._v(\" 场景 \")]),\n          _c(\"view\", { staticClass: \"application-content-none\" }, [\n            _vm._v(\" \" + _vm._s(_vm.scene)),\n          ]),\n        ]),\n        _vm.role\n          ? _c(\"view\", { staticClass: \"application-item\" }, [\n              _c(\"view\", { staticClass: \"application-label\" }, [\n                _vm._v(\" 角色 \"),\n              ]),\n              _c(\"view\", { staticClass: \"application-content-none\" }, [\n                _vm._v(\" \" + _vm._s(_vm.role)),\n              ]),\n            ])\n          : _vm._e(),\n      ]),\n    ]),\n    _c(\n      \"view\",\n      { staticClass: \"application-cost\" },\n      [\n        _vm._l(_vm.expense_details, function (item, index) {\n          return _c(\"view\", { key: index, staticClass: \"application-item\" }, [\n            _c(\"view\", { staticClass: \"application-label\" }, [\n              _vm._v(\" \" + _vm._s(item.name) + \" \"),\n              item.tips\n                ? _c(\"view\", { staticClass: \"application-tag\" }, [\n                    _vm._v(\" \" + _vm._s(item.tips) + \" \"),\n                  ])\n                : _vm._e(),\n            ]),\n            _c(\"view\", { staticClass: \"application-content\" }, [\n              _vm._v(\" ¥ \" + _vm._s(item.amount)),\n            ]),\n          ])\n        }),\n        _c(\"view\", { staticClass: \"application-split\" }),\n        _c(\"view\", { staticClass: \"application-item\" }, [\n          _c(\"view\", { staticClass: \"application-label blod\" }, [\n            _vm._v(\" 实际支付 \"),\n          ]),\n          _c(\"view\", { staticClass: \"application-content price-style\" }, [\n            _vm._v(\" ¥\" + _vm._s(_vm.actual_payment)),\n          ]),\n        ]),\n      ],\n      2\n    ),\n    _c(\n      \"view\",\n      { staticClass: \"payment\" },\n      _vm._l(_vm.payment_method, function (item, index) {\n        return _c(\"view\", { key: index, staticClass: \"application-item\" }, [\n          _c(\"view\", { staticClass: \"application-label\" }, [\n            _vm._v(\" \" + _vm._s(item.method) + \" \"),\n          ]),\n          _c(\"view\", { staticClass: \"application-content\" }, [\n            _c(\n              \"view\",\n              {\n                staticClass: \"check_box\",\n                class: item.is_select === 1 ? \"check_box_ed\" : \"\",\n                on: {\n                  tap: function ($event) {\n                    return _vm.choosePayment(index)\n                  },\n                },\n              },\n              [\n                _c(\"image\", {\n                  attrs: {\n                    src:\n                      \"https://yuepai-oss.qubeitech.com/static/images/common/select2_\" +\n                      (item.is_select === 1 ? 1 : 0) +\n                      \".png\",\n                  },\n                }),\n              ]\n            ),\n          ]),\n        ])\n      }),\n      0\n    ),\n    _c(\n      \"view\",\n      {\n        staticClass: \"application-fixed\",\n        class: _vm.isIphoneX ? \"fix-iphonex-button\" : \"\",\n      },\n      [\n        _c(\"view\", { staticClass: \"application-fixed-left\" }, [\n          _c(\"view\", { staticClass: \"application-fixed-price\" }, [\n            _vm._v(\" ¥\" + _vm._s(_vm.actual_payment) + \" \"),\n          ]),\n          _c(\"view\", { staticClass: \"reduction\" }, [\n            _vm._v(\"共减免¥\" + _vm._s(_vm.reduce_payment)),\n          ]),\n        ]),\n        _c(\n          \"view\",\n          {\n            staticClass: \"application-fixed-rt\",\n            on: { tap: _vm.confirmPayment },\n          },\n          [_vm._v(\" 确认支付 \")]\n        ),\n      ]\n    ),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {\"navigationBarTitleText\":\"报名支付\",\"enablePullDownRefresh\":true};\n\n\nvar inst = Page(createPageConfig(component, 'packageActivity/pages/application/index', {root:{cn:[]}}, config || {}))\n\n\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=45907065&scoped=true&\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AACA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAGA;AACA;AACA;AAbA;AAeA;AACA;AACA;AADA;AAGA;AACA;AA1BA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2BA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AADA;AAAA;AAAA;AACA;AADA;AAKA;AACA;AACA;AAPA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AAjFA;AAmFA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AArHA;;;;;;;;;;;;;ACjIA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvJA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}