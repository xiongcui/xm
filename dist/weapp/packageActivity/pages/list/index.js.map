{"version":3,"file":"packageActivity/pages/list/index.js","sources":["webpack:///./src/packageActivity/pages/list/index.vue?4ee4","webpack:///index.vue","webpack:///./src/packageActivity/pages/list/index.vue?2ebf","webpack:///._src_packageActivity_pages_list_index.scss","webpack:///._src_packageActivity_pages_list_index.vue","webpack:///./src/packageActivity/pages/list/index.vue?b72b","webpack:///./src/packageActivity/pages/list/index.vue?eeaf"],"sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6128b102&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"6128b102\",\n  \"2d3cf266\"\n  \n)\n\ncomponent.options.__file = \"src/packageActivity/pages/list/index.vue\"\nexport default component.exports","<template>\n  <view class=\"activity\">\n    <view\n      class=\"activity-box\"\n      v-for=\"(item, index) in list\"\n      :key=\"index\"\n      @tap=\"godetail(item.oid)\"\n    >\n      <view class=\"activity-top\">\n        <view class=\"activity-left\">\n          <image :src=\"item.main_cover\" mode=\"aspectFill\"></image>\n          <text class=\"activity-label\">{{ item.name }}</text>\n        </view>\n        <view class=\"activity-right\">\n          <view class=\"activity-title\">\n            {{ item.title }}\n          </view>\n          <view class=\"activity-tags\" v-if=\"item.label\">\n            <view\n              class=\"tag\"\n              v-for=\"(labelItem, labelIndex) in item.label\"\n              :key=\"labelIndex\"\n            >\n              {{ labelItem }}\n            </view>\n          </view>\n          <view class=\"activity-location\"> {{ item.address }} </view>\n          <view class=\"activity-time\">\n            <text class=\"activity-txt\">{{ item.begin_datetime }}</text>\n            <text\n              class=\"activity-price\"\n              v-if=\"item.original_amount.show == 'text'\"\n            >\n              <text class=\"price-blod\">{{ item.original_amount.label }}</text>\n            </text>\n            <text class=\"activity-price\" v-else>\n              <text class=\"price-blod\">{{ item.original_amount.amount }}</text>\n              <text>元</text>\n            </text>\n          </view>\n        </view>\n      </view>\n      <view class=\"activity-bottom\">\n        <view class=\"activity-info\">\n          <image :src=\"item.partner_avatar\"></image>\n          <text class=\"activity-name\">{{ item.partner_name }}</text>\n        </view>\n        <view class=\"schedule\">\n          <view\n            class=\"schedule-bg\"\n            :style=\"{\n              width:\n                (item.apply_current_number / item.apply_total_number) * 100 +\n                '%',\n            }\"\n          ></view>\n          <text class=\"schedule-txt\">{{ item.apply_schedule_status }}</text>\n          <text class=\"schedule-num\"\n            >{{ item.apply_current_number }} /\n            {{ item.apply_total_number }}</text\n          >\n        </view>\n        <view class=\"application-time\"> {{ item.enter_deadline_time }} </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport \"./index.scss\";\nimport { exploreList } from \"../../../api/index.js\";\nimport { errortip, openPage } from \"../../../utils/util\";\nexport default {\n  name: \"activityList\",\n  data() {\n    return {\n      pageNum: 1,\n      pageSize: 10,\n      list: [],\n      loading: true,\n    };\n  },\n  methods: {\n    // 加载更多\n    onMore() {\n      //在当前页面显示导航条加载动画\n      wx.showNavigationBarLoading();\n      //显示 loading 提示框。需主动调用 wx.hideLoading 才能关闭提示框\n      wx.showLoading({\n        title: \"数据加载中...\",\n      });\n      this.loading = false;\n      this.query(\"more\");\n    },\n    query(type) {\n      if (type == \"init\") this.pageNum = 1;\n      this.exploreList(\n        {\n          page: this.pageNum,\n          per_page: this.pageSize,\n        },\n        type\n      );\n    },\n    godetail(oid) {\n      openPage(\"/packageActivity/pages/detail/index?oid=\" + oid);\n    },\n    async exploreList(params, type) {\n      try {\n        let res = await exploreList(params);\n        //隐藏loading 提示框\n        wx.hideLoading();\n\n        //隐藏导航条加载动画\n        wx.hideNavigationBarLoading();\n        //停止下拉刷新\n        wx.stopPullDownRefresh();\n\n        if (type == \"init\") {\n          this.list = res.data.data.items;\n          this.loading = true;\n        } else if (type == \"more\") {\n          if (!res.data.data || !res.data.data.items.length) {\n            errortip(\"没有更多数据了～\");\n            this.loading = true;\n            return false;\n          }\n          let data = res.data.data.items;\n          this.list = this.list.concat(data);\n          this.loading = true;\n        }\n      } catch (error) {}\n    },\n  },\n  created() {\n    this.query(\"init\");\n  },\n  onPullDownRefresh: function () {\n    this.query(\"init\");\n  },\n  onReachBottom: function () {\n    console.log(\"下拉加载更多\", this.loading);\n    this.pageNum++;\n    if (this.loading) {\n      this.onMore();\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"view\",\n    { staticClass: \"activity\" },\n    _vm._l(_vm.list, function (item, index) {\n      return _c(\n        \"view\",\n        {\n          key: index,\n          staticClass: \"activity-box\",\n          on: {\n            tap: function ($event) {\n              return _vm.godetail(item.oid)\n            },\n          },\n        },\n        [\n          _c(\"view\", { staticClass: \"activity-top\" }, [\n            _c(\"view\", { staticClass: \"activity-left\" }, [\n              _c(\"image\", {\n                attrs: { src: item.main_cover, mode: \"aspectFill\" },\n              }),\n              _c(\"text\", { staticClass: \"activity-label\" }, [\n                _vm._v(_vm._s(item.name)),\n              ]),\n            ]),\n            _c(\"view\", { staticClass: \"activity-right\" }, [\n              _c(\"view\", { staticClass: \"activity-title\" }, [\n                _vm._v(\" \" + _vm._s(item.title) + \" \"),\n              ]),\n              item.label\n                ? _c(\n                    \"view\",\n                    { staticClass: \"activity-tags\" },\n                    _vm._l(item.label, function (labelItem, labelIndex) {\n                      return _c(\n                        \"view\",\n                        { key: labelIndex, staticClass: \"tag\" },\n                        [_vm._v(\" \" + _vm._s(labelItem) + \" \")]\n                      )\n                    }),\n                    0\n                  )\n                : _vm._e(),\n              _c(\"view\", { staticClass: \"activity-location\" }, [\n                _vm._v(\" \" + _vm._s(item.address) + \" \"),\n              ]),\n              _c(\"view\", { staticClass: \"activity-time\" }, [\n                _c(\"text\", { staticClass: \"activity-txt\" }, [\n                  _vm._v(_vm._s(item.begin_datetime)),\n                ]),\n                item.original_amount.show == \"text\"\n                  ? _c(\"text\", { staticClass: \"activity-price\" }, [\n                      _c(\"text\", { staticClass: \"price-blod\" }, [\n                        _vm._v(_vm._s(item.original_amount.label)),\n                      ]),\n                    ])\n                  : _c(\"text\", { staticClass: \"activity-price\" }, [\n                      _c(\"text\", { staticClass: \"price-blod\" }, [\n                        _vm._v(_vm._s(item.original_amount.amount)),\n                      ]),\n                      _c(\"text\", [_vm._v(\"元\")]),\n                    ]),\n              ]),\n            ]),\n          ]),\n          _c(\"view\", { staticClass: \"activity-bottom\" }, [\n            _c(\"view\", { staticClass: \"activity-info\" }, [\n              _c(\"image\", { attrs: { src: item.partner_avatar } }),\n              _c(\"text\", { staticClass: \"activity-name\" }, [\n                _vm._v(_vm._s(item.partner_name)),\n              ]),\n            ]),\n            _c(\"view\", { staticClass: \"schedule\" }, [\n              _c(\"view\", {\n                staticClass: \"schedule-bg\",\n                style: {\n                  width:\n                    (item.apply_current_number / item.apply_total_number) *\n                      100 +\n                    \"%\",\n                },\n              }),\n              _c(\"text\", { staticClass: \"schedule-txt\" }, [\n                _vm._v(_vm._s(item.apply_schedule_status)),\n              ]),\n              _c(\"text\", { staticClass: \"schedule-num\" }, [\n                _vm._v(\n                  _vm._s(item.apply_current_number) +\n                    \" / \" +\n                    _vm._s(item.apply_total_number)\n                ),\n              ]),\n            ]),\n            _c(\"view\", { staticClass: \"application-time\" }, [\n              _vm._v(\" \" + _vm._s(item.enter_deadline_time) + \" \"),\n            ]),\n          ]),\n        ]\n      )\n    }),\n    0\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {\"navigationBarTitleText\":\"活动列表\",\"enablePullDownRefresh\":true};\n\n\nvar inst = Page(createPageConfig(component, 'packageActivity/pages/list/index', {root:{cn:[]}}, config || {}))\n\n\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=6128b102&scoped=true&\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAFA;AAMA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAVA;AAAA;AAAA;AAAA;AACA;AAWA;AACA;AAbA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAeA;AACA;AAjBA;AACA;AADA;AAoBA;AACA;AACA;AACA;AAvBA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBA;AAlDA;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AA1EA;;;;;;;;;;;;;ACxEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7GA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}