{"version":3,"file":"pages/register/index.js","sources":["webpack:///./src/pages/register/index.vue?4b3a","webpack:///index.vue","webpack:///./src/pages/register/index.vue?22ca","webpack:///._src_pages_register_index.scss","webpack:///._src_pages_register_index.vue","webpack:///./src/pages/register/index.vue?6d5f","webpack:///./src/pages/register/index.vue?bfaa"],"sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1a38522c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"1a38522c\",\n  \"54b88990\"\n  \n)\n\ncomponent.options.__file = \"src/pages/register/index.vue\"\nexport default component.exports","<template>\n  <view>\n    <form bindreset=\"reset\" class=\"main\">\n      <view class=\"top\">\n        <view @tap=\"chooesImage\" class=\"avatar\">\n          <image mode=\"aspectFit\" :src=\"avatar\" v-if=\"avatar\"></image>\n          <image class=\"no_avatar\" mode=\"aspectFit\" v-else></image>\n        </view>\n        <!-- <view class=\"avatar_select\">\n              <image @tap=\"chooesImage\" src=\"https://yuepai-oss.qubeitech.com/static/images/avatar_select.png\"></image>\n          </view> -->\n      </view>\n      <view class=\"infor\">\n        <view class=\"item ub item-b\">\n          <view class=\"item_label\">昵称</view>\n          <view class=\"ub-f1 item_input\">\n            <input\n              maxlength=\"60\"\n              name=\"nickname\"\n              placeholder=\"请输入你的昵称\"\n              placeholderClass=\"nickname_tip\"\n              type=\"text\"\n              v-model=\"nickname\"\n            />\n          </view>\n        </view>\n        <view class=\"item ub item-b\">\n          <view class=\"item_label\">性别</view>\n          <view class=\"ub-f1 item_input\">\n            <image\n              @tap=\"sexChange(1)\"\n              class=\"select_sex\"\n              data-sex=\"1\"\n              src=\"https://yuepai-oss.qubeitech.com/static/images/six1ed.png\"\n              v-if=\"sex === 1\"\n            ></image>\n            <image\n              @tap=\"sexChange(1)\"\n              class=\"select_sex\"\n              data-sex=\"1\"\n              src=\"https://yuepai-oss.qubeitech.com/static/images/six1.png\"\n              v-else\n            ></image>\n            <image\n              @tap=\"sexChange(0)\"\n              class=\"select_sex\"\n              data-sex=\"2\"\n              src=\"https://yuepai-oss.qubeitech.com/static/images/six2ed.png\"\n              v-if=\"sex === 0\"\n            ></image>\n            <image\n              @tap=\"sexChange(0)\"\n              class=\"select_sex\"\n              data-sex=\"2\"\n              src=\"https://yuepai-oss.qubeitech.com/static/images/six2.png\"\n              v-else\n            ></image>\n          </view>\n        </view>\n        <view class=\"item ub item-b\">\n          <view class=\"item_label\">生日</view>\n          <view class=\"ub-f1 item_input\">\n            <picker\n              @change=\"dateChange\"\n              mode=\"date\"\n              start=\"1960-09-01\"\n              value=\"2000-01-01\"\n            >\n              <view class=\"picker_children picked\" v-if=\"date\">{{ date }}</view>\n              <view class=\"picker_children\" v-else>请选择生日</view>\n            </picker>\n          </view>\n        </view>\n        <view class=\"item ub item-b\">\n          <view class=\"item_label\">地区</view>\n          <view class=\"ub-f1 item_input\">\n            <picker mode=\"region\" @change=\"bindRegionChange\" value=\"region\">\n              <view\n                class=\"picker_children pick_city picked\"\n                v-if=\"select_city\"\n                >{{ select_city }}</view\n              >\n              <view class=\"picker_children\" v-else>请选择地区</view>\n            </picker>\n          </view>\n        </view>\n        <view class=\"item ub item-b\">\n          <view class=\"item_label\">身份</view>\n          <view class=\"ub-f1 item_input\">\n            <view>{{ globalData.identity }}</view>\n            <view\n              class=\"picker_children pick_city picked\"\n              v-if=\"identity\"\n              @tap=\"identityFocus\"\n            >\n              {{ identity }}\n            </view>\n            <view class=\"picker_children\" v-else @tap=\"identityFocus\"\n              >请选择身份{{ globalData.identity }}</view\n            >\n          </view>\n        </view>\n      </view>\n      <view class=\"savebox\">\n        <button class=\"save-btn\" @tap=\"submit\">完 成</button>\n      </view>\n    </form>\n    <!-- <weCropper :visible=\"visible\" :src=\"avatar\"></weCropper> -->\n  </view>\n</template>\n\n<script>\nimport \"./index.scss\";\nimport { getCareer, userRegister } from \"../../api/index\";\nimport { errortip, openPage } from \"../../utils/util\";\nexport default {\n  name: \"register\",\n  data() {\n    return {\n      avatar: \"\",\n      nickname: \"\",\n      invited_uuid: \"\",\n      visible: false,\n      sex: \"\",\n      date: \"\",\n      identity: \"\",\n      select_city: \"\",\n      region: [],\n      regionList: [],\n      multiArray: [], //地区\n      type: 0,\n      identityList: [],\n    };\n  },\n  // components: {\n  //   weCropper,\n  // },\n  methods: {\n    chooesImage() {\n      this.visible = true;\n    },\n    sexChange(index) {\n      this.sex = index;\n    },\n    dateChange(e) {\n      this.date = e.detail.value;\n    },\n    bindRegionChange(e) {\n      this.select_city = e.detail.value.join(\"-\");\n      this.regionList = e.detail.code;\n    },\n    identityFocus() {\n      openPage(\"/packageAdd/pages/user/identity/index\");\n    },\n    submit() {\n      if (!this.nickname) {\n        errortip(\"请填写名称！\");\n        return false;\n      }\n      if (this.sex === \"\") {\n        errortip(\"请选择性别！\");\n        return false;\n      }\n      if (!this.date) {\n        errortip(\"请选择生日！\");\n        return false;\n      }\n      if (!this.select_city) {\n        errortip(\"请选择地区！\");\n        return false;\n      }\n      if (!this.identity) {\n        errortip(\"请选择身份！\");\n        return false;\n      }\n      let params = {\n        invited_uuid: this.invited_uuid,\n        nickname: this.nickname,\n        sex: this.sex,\n        birthday: this.date,\n        addressName: this.select_city,\n        address: this.regionList,\n        avatar: this.avatar,\n        career_label: this.identityList,\n      };\n      console.log(params);\n      this.userRegister(params);\n    },\n    async userRegister(params) {\n      try {\n        let res = await userRegister(params);\n        // 跳转首页\n        wx.switchTab({\n          url: \"/pages/home/index\",\n          success: function (e) {\n            var page = getCurrentPages().pop();\n            if (page == undefined || page == null) return;\n            page.onLoad();\n          },\n        });\n      } catch (error) {}\n    },\n    async getCareer(params) {\n      try {\n        let res = await getCareer(params);\n        let data = res.data.data;\n        if (data.user_career.career_label) {\n          let arr = data.user_career.career_label;\n          this.identity = arr.join(\".\");\n          this.identityList = data.user_career.career_label;\n        }\n      } catch (error) {}\n    },\n  },\n  created() {\n    let userInfo = wx.getStorageSync(\"userInfo\");\n    this.invited_uuid = wx.getStorageSync(\"invited_uuid\");\n    this.avatar = userInfo.avatar;\n    this.nickname = userInfo.nickname;\n  },\n  onShow() {\n    // let pages = getCurrentPages();\n    // let currPage = pages[pages.length - 1]; //当前页面\n    // let data = currPage.data;\n    this.getCareer(\"\");\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", [\n    _c(\"form\", { staticClass: \"main\", attrs: { bindreset: \"reset\" } }, [\n      _c(\"view\", { staticClass: \"top\" }, [\n        _c(\"view\", { staticClass: \"avatar\", on: { tap: _vm.chooesImage } }, [\n          _vm.avatar\n            ? _c(\"image\", { attrs: { mode: \"aspectFit\", src: _vm.avatar } })\n            : _c(\"image\", {\n                staticClass: \"no_avatar\",\n                attrs: { mode: \"aspectFit\" },\n              }),\n        ]),\n      ]),\n      _c(\"view\", { staticClass: \"infor\" }, [\n        _c(\"view\", { staticClass: \"item ub item-b\" }, [\n          _c(\"view\", { staticClass: \"item_label\" }, [_vm._v(\"昵称\")]),\n          _c(\"view\", { staticClass: \"ub-f1 item_input\" }, [\n            _c(\"input\", {\n              directives: [\n                {\n                  name: \"model\",\n                  rawName: \"v-model\",\n                  value: _vm.nickname,\n                  expression: \"nickname\",\n                },\n              ],\n              attrs: {\n                maxlength: \"60\",\n                name: \"nickname\",\n                placeholder: \"请输入你的昵称\",\n                placeholderClass: \"nickname_tip\",\n                type: \"text\",\n              },\n              domProps: { value: _vm.nickname },\n              on: {\n                input: function ($event) {\n                  if ($event.target.composing) {\n                    return\n                  }\n                  _vm.nickname = $event.target.value\n                },\n              },\n            }),\n          ]),\n        ]),\n        _c(\"view\", { staticClass: \"item ub item-b\" }, [\n          _c(\"view\", { staticClass: \"item_label\" }, [_vm._v(\"性别\")]),\n          _c(\"view\", { staticClass: \"ub-f1 item_input\" }, [\n            _vm.sex === 1\n              ? _c(\"image\", {\n                  staticClass: \"select_sex\",\n                  attrs: {\n                    \"data-sex\": \"1\",\n                    src: \"https://yuepai-oss.qubeitech.com/static/images/six1ed.png\",\n                  },\n                  on: {\n                    tap: function ($event) {\n                      return _vm.sexChange(1)\n                    },\n                  },\n                })\n              : _c(\"image\", {\n                  staticClass: \"select_sex\",\n                  attrs: {\n                    \"data-sex\": \"1\",\n                    src: \"https://yuepai-oss.qubeitech.com/static/images/six1.png\",\n                  },\n                  on: {\n                    tap: function ($event) {\n                      return _vm.sexChange(1)\n                    },\n                  },\n                }),\n            _vm.sex === 0\n              ? _c(\"image\", {\n                  staticClass: \"select_sex\",\n                  attrs: {\n                    \"data-sex\": \"2\",\n                    src: \"https://yuepai-oss.qubeitech.com/static/images/six2ed.png\",\n                  },\n                  on: {\n                    tap: function ($event) {\n                      return _vm.sexChange(0)\n                    },\n                  },\n                })\n              : _c(\"image\", {\n                  staticClass: \"select_sex\",\n                  attrs: {\n                    \"data-sex\": \"2\",\n                    src: \"https://yuepai-oss.qubeitech.com/static/images/six2.png\",\n                  },\n                  on: {\n                    tap: function ($event) {\n                      return _vm.sexChange(0)\n                    },\n                  },\n                }),\n          ]),\n        ]),\n        _c(\"view\", { staticClass: \"item ub item-b\" }, [\n          _c(\"view\", { staticClass: \"item_label\" }, [_vm._v(\"生日\")]),\n          _c(\n            \"view\",\n            { staticClass: \"ub-f1 item_input\" },\n            [\n              _c(\n                \"picker\",\n                {\n                  attrs: {\n                    mode: \"date\",\n                    start: \"1960-09-01\",\n                    value: \"2000-01-01\",\n                  },\n                  on: { change: _vm.dateChange },\n                },\n                [\n                  _vm.date\n                    ? _c(\"view\", { staticClass: \"picker_children picked\" }, [\n                        _vm._v(_vm._s(_vm.date)),\n                      ])\n                    : _c(\"view\", { staticClass: \"picker_children\" }, [\n                        _vm._v(\"请选择生日\"),\n                      ]),\n                ]\n              ),\n            ],\n            1\n          ),\n        ]),\n        _c(\"view\", { staticClass: \"item ub item-b\" }, [\n          _c(\"view\", { staticClass: \"item_label\" }, [_vm._v(\"地区\")]),\n          _c(\n            \"view\",\n            { staticClass: \"ub-f1 item_input\" },\n            [\n              _c(\n                \"picker\",\n                {\n                  attrs: { mode: \"region\", value: \"region\" },\n                  on: { change: _vm.bindRegionChange },\n                },\n                [\n                  _vm.select_city\n                    ? _c(\n                        \"view\",\n                        { staticClass: \"picker_children pick_city picked\" },\n                        [_vm._v(_vm._s(_vm.select_city))]\n                      )\n                    : _c(\"view\", { staticClass: \"picker_children\" }, [\n                        _vm._v(\"请选择地区\"),\n                      ]),\n                ]\n              ),\n            ],\n            1\n          ),\n        ]),\n        _c(\"view\", { staticClass: \"item ub item-b\" }, [\n          _c(\"view\", { staticClass: \"item_label\" }, [_vm._v(\"身份\")]),\n          _c(\"view\", { staticClass: \"ub-f1 item_input\" }, [\n            _c(\"view\", [_vm._v(_vm._s(_vm.globalData.identity))]),\n            _vm.identity\n              ? _c(\n                  \"view\",\n                  {\n                    staticClass: \"picker_children pick_city picked\",\n                    on: { tap: _vm.identityFocus },\n                  },\n                  [_vm._v(\" \" + _vm._s(_vm.identity) + \" \")]\n                )\n              : _c(\n                  \"view\",\n                  {\n                    staticClass: \"picker_children\",\n                    on: { tap: _vm.identityFocus },\n                  },\n                  [_vm._v(\"请选择身份\" + _vm._s(_vm.globalData.identity))]\n                ),\n          ]),\n        ]),\n      ]),\n      _c(\"view\", { staticClass: \"savebox\" }, [\n        _c(\"button\", { staticClass: \"save-btn\", on: { tap: _vm.submit } }, [\n          _vm._v(\"完 成\"),\n        ]),\n      ]),\n    ]),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pages/register/index', {root:{cn:[]}}, config || {}))\n\n\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=1a38522c&scoped=true&\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAbA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAJA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AA3EA;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9GA;;;;;;;;;;;;;ACnHA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnMA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}