{"version":3,"file":"packageMoka/pages/moka/choosephoto/index.js","sources":["webpack:///./src/packageMoka/pages/moka/choosephoto/index.vue?94a6","webpack:///index.vue","webpack:///./src/packageMoka/pages/moka/choosephoto/index.vue?19cb","webpack:///._src_packageMoka_pages_moka_choosephoto_index.scss","webpack:///._src_packageMoka_pages_moka_choosephoto_index.vue","webpack:///./src/packageMoka/pages/moka/choosephoto/index.vue?4f7b","webpack:///./src/packageMoka/pages/moka/choosephoto/index.vue?8026"],"sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=988f2208&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"988f2208\",\n  \"5b8dbf6c\"\n  \n)\n\ncomponent.options.__file = \"src/packageMoka/pages/moka/choosephoto/index.vue\"\nexport default component.exports","<template>\n  <view class=\"choosephoto\">\n    <view class=\"photos-container ub\">\n      <view\n        class=\"photo-container\"\n        v-for=\"(item, index) in photos\"\n        :key=\"index\"\n      >\n        <image class=\"photo\" mode=\"aspectFill\" :src=\"item\"></image>\n        <image\n          @tap=\"deletePhoto\"\n          class=\"delete-button\"\n          :id=\"index\"\n          src=\"https://yuepai-oss.qubeitech.com/static/images/moka/makecard/delete.png\"\n        ></image>\n      </view>\n    </view>\n    <view class=\"choose-number\">{{ photos.length }}/{{ maxCount }}</view>\n    <text class=\"choose-hint\" v-if=\"maxCount - photos.length > 0\"\n      >模版为{{ maxCount }}张照片，还差{{\n        maxCount - photos.length\n      }}张，请继续添加</text\n    >\n    <view @tap=\"choosePhoto\" class=\"choose-button\">{{ buttonTitle }}</view>\n  </view>\n</template>\n\n<script>\nimport { openPage } from \"../../../../utils/util\";\nimport \"./index.scss\";\nconst moka = require(\"../../../../assets/js/moka.js\");\nexport default {\n  name: \"choosephoto\",\n  data() {\n    return {\n      photos: [],\n      maxCount: 10,\n      buttonTitle: \"上传照片\",\n    };\n  },\n  methods: {\n    setButtonTitle: function () {\n      var t = this.photos.length,\n        o = \"\";\n      o = t >= this.maxCount ? \"开始制作\" : 0 == t ? \"添加照片\" : \"继续添加\";\n      this.buttonTitle = o;\n    },\n    choosePhoto() {\n      this.photos;\n      var o = this.photos.length,\n        e = this.maxCount;\n      if (o >= e)\n        return (\n          wx.setStorageSync(\"selectedPhotos\", this.photos),\n          void openPage(\"/packageMoka/pages/moka/chooseisself/index\")\n        );\n      var s = this;\n      wx.chooseImage({\n        count: e - o,\n        sizeType: [\"compressed\"],\n        sourceType: [\"album\"],\n        success: function (o) {\n          var e = o.tempFilePaths;\n          (s.photos = [].concat(s.photos, e)),\n            (s.photos = s.photos),\n            s.setButtonTitle();\n        },\n      });\n    },\n    deletePhoto(t) {\n      var o = parseInt(t.currentTarget.id);\n      this.photos.splice(o, 1);\n      this.setButtonTitle();\n    },\n  },\n  onLoad: function (options) {\n    let cardid = wx.getStorageSync(\"cardid\");\n    let mokaIndex = moka.getIndexByCardId(cardid);\n    var layouts = moka.layouts[mokaIndex];\n    console.log(layouts, \"layouts\");\n    photos = wx.getStorageSync(\"selectedPhotos\");\n    this.maxCount = layouts.maxCount;\n    this.photos = photos;\n    this.setButtonTitle();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", { staticClass: \"choosephoto\" }, [\n    _c(\n      \"view\",\n      { staticClass: \"photos-container ub\" },\n      _vm._l(_vm.photos, function (item, index) {\n        return _c(\"view\", { key: index, staticClass: \"photo-container\" }, [\n          _c(\"image\", {\n            staticClass: \"photo\",\n            attrs: { mode: \"aspectFill\", src: item },\n          }),\n          _c(\"image\", {\n            staticClass: \"delete-button\",\n            attrs: {\n              id: index,\n              src: \"https://yuepai-oss.qubeitech.com/static/images/moka/makecard/delete.png\",\n            },\n            on: { tap: _vm.deletePhoto },\n          }),\n        ])\n      }),\n      0\n    ),\n    _c(\"view\", { staticClass: \"choose-number\" }, [\n      _vm._v(_vm._s(_vm.photos.length) + \"/\" + _vm._s(_vm.maxCount)),\n    ]),\n    _vm.maxCount - _vm.photos.length > 0\n      ? _c(\"text\", { staticClass: \"choose-hint\" }, [\n          _vm._v(\n            \"模版为\" +\n              _vm._s(_vm.maxCount) +\n              \"张照片，还差\" +\n              _vm._s(_vm.maxCount - _vm.photos.length) +\n              \"张，请继续添加\"\n          ),\n        ])\n      : _vm._e(),\n    _c(\"view\", { staticClass: \"choose-button\", on: { tap: _vm.choosePhoto } }, [\n      _vm._v(_vm._s(_vm.buttonTitle)),\n    ]),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'packageMoka/pages/moka/choosephoto/index', {root:{cn:[]}}, config || {}))\n\n\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=988f2208&scoped=true&\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACMA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AATA;AAWA;AACA;AACA;AACA;AACA;AACA;AAjCA;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArDA;;;;;;;;;;;;;AC/BA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/CA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}