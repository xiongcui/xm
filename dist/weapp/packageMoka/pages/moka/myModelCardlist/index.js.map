{"version":3,"file":"packageMoka/pages/moka/myModelCardlist/index.js","sources":["webpack:///./src/packageMoka/pages/moka/myModelCardlist/index.vue?5055","webpack:///index.vue","webpack:///./src/packageMoka/pages/moka/myModelCardlist/index.vue?47b2","webpack:///._src_packageMoka_pages_moka_myModelCardlist_index.scss","webpack:///._src_packageMoka_pages_moka_myModelCardlist_index.vue","webpack:///./src/packageMoka/pages/moka/myModelCardlist/index.vue?051b","webpack:///./src/packageMoka/pages/moka/myModelCardlist/index.vue?cf4a"],"sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0e92b52c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"0e92b52c\",\n  \"a0c3e10c\"\n  \n)\n\ncomponent.options.__file = \"src/packageMoka/pages/moka/myModelCardlist/index.vue\"\nexport default component.exports","<template>\n  <view class=\"my-model-card\">\n    <view class=\"tab\">\n      <view\n        class=\"tab-item\"\n        :class=\"currentTab == 0 ? 'on' : ''\"\n        @tap=\"changeItem(0)\"\n        >给自己做的\n      </view>\n      <view\n        class=\"tab-item\"\n        :class=\"currentTab == 1 ? 'on' : ''\"\n        @tap=\"changeItem(1)\"\n        >给别人做的\n      </view>\n    </view>\n    <view class=\"content\">\n      <swiper\n        :current=\"currentTab\"\n        class=\"swiper-box\"\n        duration=\"300\"\n        @change=\"bindChange\"\n        :style=\"{ paddingBottom: isIphoneX ? '180rpx' : '120rpx' }\"\n      >\n        <swiper-item>\n          <scroll-view\n            :scroll-y=\"true\"\n            :style=\"{ height: winHeight + 'px' }\"\n            @scrolltolower=\"scrollToLower\"\n            :lower-threshold=\"200\"\n          >\n            <block v-if=\"list.length\">\n              <view class=\"card-box\" v-for=\"(item, index) in list\" :key=\"index\">\n                <image mode=\"widthFix\" :src=\"item.mocha_url\"></image>\n                <view class=\"card-bottom\">\n                  <view class=\"card-delete\" @tap=\"cardDelete(item.oid)\"\n                    >删除</view\n                  >\n                  <view class=\"card-img\" @tap=\"downloadMoka(item.mocha_url)\"\n                    >下载原图</view\n                  >\n                </view>\n              </view>\n            </block>\n            <view v-else class=\"none-data\">\n              <image\n                src=\"https://yuepai-oss.qubeitech.com/static/images/common/none.png\"\n                mode=\"aspectFill\"\n                class=\"none-img\"\n              ></image>\n              <view>当前暂无信息哦～</view>\n            </view>\n          </scroll-view>\n        </swiper-item>\n        <swiper-item>\n          <scroll-view\n            :scroll-y=\"true\"\n            :style=\"{ height: winHeight + 'px' }\"\n            @scrolltolower=\"scrollToLower\"\n            :lower-threshold=\"200\"\n          >\n            <block v-if=\"list.length\">\n              <view class=\"card-box\" v-for=\"(item, index) in list\" :key=\"index\">\n                <image mode=\"widthFix\" :src=\"item.mocha_url\"></image>\n                <view class=\"card-bottom\">\n                  <view class=\"card-delete\" @tap=\"cardDelete(item.oid)\"\n                    >删除</view\n                  >\n                  <view class=\"card-img\" @tap=\"downloadMoka(item.mocha_url)\"\n                    >下载原图</view\n                  >\n                </view>\n              </view>\n            </block>\n\n            <view v-else class=\"none-data\">\n              <image\n                src=\"https://yuepai-oss.qubeitech.com/static/images/common/none.png\"\n                mode=\"aspectFill\"\n                class=\"none-img\"\n              ></image>\n              <view>当前暂无信息哦～</view>\n            </view>\n          </scroll-view>\n        </swiper-item>\n      </swiper>\n    </view>\n    <cover-view\n      :class=\"`subbtn_bottom_block ${isIphoneX ? 'fix-iphonex-button' : ''}`\"\n    >\n      <cover-view class=\"subbtn_bottom\">\n        <button @tap=\"makeMoka\">制作模卡</button>\n      </cover-view>\n    </cover-view>\n  </view>\n</template>\n\n<script>\nimport \"./index.scss\";\nimport { mochaList, mochaEvent } from \"../../../../api/index\";\nimport { errortip, openPage } from \"../../../../utils/util\";\nexport default {\n  name: \"myModelCardlist\",\n  data() {\n    return {\n      isIphoneX: false,\n      // 页面配置\n      winWidth: 0,\n      winHeight: 0,\n      // tab切换\n      currentTab: 0,\n      list: [],\n      pageNum: 1,\n      pageSize: 10,\n    };\n  },\n  methods: {\n    makeMoka() {\n      openPage(\"/packageMoka/pages/moka/modelcard/index\");\n    },\n    // 滑动切换tab\n    bindChange(e) {\n      this.currentTab = e.detail.current;\n    },\n    // 点击tab切换\n    changeItem(index) {\n      if (this.currentTab === index) {\n        return false;\n      } else {\n        this.currentTab = index;\n        this.pageNum = 1;\n        this.list = [];\n        this.query();\n      }\n    },\n    query() {\n      let params = {\n        page: this.pageNum,\n        per_page: this.pageSize,\n      };\n      if (this.currentTab == 1) {\n        params.mocha_type = \"non_personal\";\n      } else {\n        params.mocha_type = \"oneself\";\n      }\n      this.mochaList(params);\n    },\n    scrollToLower() {\n      this.pageNum++;\n      this.query();\n    },\n    cardDelete(oid) {\n      let _this = this;\n      wx.showModal({\n        title: \"温馨提示\",\n        content: `确定要删除这张模卡吗？`,\n        success: function (res) {\n          if (res.confirm) {\n            let params = { oid: oid, event_type: -200 };\n            _this.mochaEvent(params);\n            console.log(\"用户点击确定\");\n          } else if (res.cancel) {\n            console.log(\"用户点击取消\");\n          }\n        },\n      });\n    },\n    downloadMoka(url) {\n      wx.showModal({\n        title: \"温馨提示\",\n        content: \"下载并保存到相册吗？\",\n        confirmColor: \"#108EE9\",\n        success: function (res) {\n          if (res.confirm) {\n            wx.showLoading({\n              title: \"下载中...\",\n            });\n            wx.downloadFile({\n              url: url,\n              success: function (res) {\n                wx.saveImageToPhotosAlbum({\n                  filePath: res.tempFilePath,\n                  success: (res) => {\n                    wx.hideLoading();\n                    wx.showToast({\n                      title: \"已保存至相册\",\n                      icon: \"success\",\n                      duration: 3000,\n                    });\n                  },\n                  faile: (err) => {\n                    console.log(\"失败！\");\n                  },\n                });\n              },\n            });\n          } else if (res.cancel) {\n            console.log(\"用户点击取消\");\n          }\n        },\n      });\n    },\n    async mochaList(params) {\n      try {\n        let res = await mochaList(params);\n        if (!res.data.data || !res.data.data.items.length) {\n          errortip(\"没有更多数据了～\");\n          return false;\n        }\n        let data = res.data.data.items;\n        this.list = this.list.concat(data);\n      } catch (error) {}\n    },\n    async mochaEvent(params) {\n      try {\n        let res = await mochaEvent(params);\n        errortip(\"删除成功\");\n        this.pageNum = 1;\n        this.list = [];\n        this.query();\n      } catch (error) {}\n    },\n  },\n  created() {\n    this.isIphoneX = this.globalData.isIphoneX;\n  },\n  onLoad: function (options) {\n    var that = this;\n    // 获取系统信息\n    wx.getSystemInfo({\n      success: function (res) {\n        that.winWidth = res.windowWidth;\n        that.winHeight = res.windowHeight;\n      },\n    });\n    this.query();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"view\",\n    { staticClass: \"my-model-card\" },\n    [\n      _c(\"view\", { staticClass: \"tab\" }, [\n        _c(\n          \"view\",\n          {\n            staticClass: \"tab-item\",\n            class: _vm.currentTab == 0 ? \"on\" : \"\",\n            on: {\n              tap: function ($event) {\n                return _vm.changeItem(0)\n              },\n            },\n          },\n          [_vm._v(\"给自己做的 \")]\n        ),\n        _c(\n          \"view\",\n          {\n            staticClass: \"tab-item\",\n            class: _vm.currentTab == 1 ? \"on\" : \"\",\n            on: {\n              tap: function ($event) {\n                return _vm.changeItem(1)\n              },\n            },\n          },\n          [_vm._v(\"给别人做的 \")]\n        ),\n      ]),\n      _c(\n        \"view\",\n        { staticClass: \"content\" },\n        [\n          _c(\n            \"swiper\",\n            {\n              staticClass: \"swiper-box\",\n              style: { paddingBottom: _vm.isIphoneX ? \"180rpx\" : \"120rpx\" },\n              attrs: { current: _vm.currentTab, duration: \"300\" },\n              on: { change: _vm.bindChange },\n            },\n            [\n              _c(\n                \"swiper-item\",\n                [\n                  _c(\n                    \"scroll-view\",\n                    {\n                      style: { height: _vm.winHeight + \"px\" },\n                      attrs: { \"scroll-y\": true, \"lower-threshold\": 200 },\n                      on: { scrolltolower: _vm.scrollToLower },\n                    },\n                    [\n                      _vm.list.length\n                        ? _c(\n                            \"block\",\n                            _vm._l(_vm.list, function (item, index) {\n                              return _c(\n                                \"view\",\n                                { key: index, staticClass: \"card-box\" },\n                                [\n                                  _c(\"image\", {\n                                    attrs: {\n                                      mode: \"widthFix\",\n                                      src: item.mocha_url,\n                                    },\n                                  }),\n                                  _c(\"view\", { staticClass: \"card-bottom\" }, [\n                                    _c(\n                                      \"view\",\n                                      {\n                                        staticClass: \"card-delete\",\n                                        on: {\n                                          tap: function ($event) {\n                                            return _vm.cardDelete(item.oid)\n                                          },\n                                        },\n                                      },\n                                      [_vm._v(\"删除\")]\n                                    ),\n                                    _c(\n                                      \"view\",\n                                      {\n                                        staticClass: \"card-img\",\n                                        on: {\n                                          tap: function ($event) {\n                                            return _vm.downloadMoka(\n                                              item.mocha_url\n                                            )\n                                          },\n                                        },\n                                      },\n                                      [_vm._v(\"下载原图\")]\n                                    ),\n                                  ]),\n                                ]\n                              )\n                            }),\n                            0\n                          )\n                        : _c(\"view\", { staticClass: \"none-data\" }, [\n                            _c(\"image\", {\n                              staticClass: \"none-img\",\n                              attrs: {\n                                src: \"https://yuepai-oss.qubeitech.com/static/images/common/none.png\",\n                                mode: \"aspectFill\",\n                              },\n                            }),\n                            _c(\"view\", [_vm._v(\"当前暂无信息哦～\")]),\n                          ]),\n                    ],\n                    1\n                  ),\n                ],\n                1\n              ),\n              _c(\n                \"swiper-item\",\n                [\n                  _c(\n                    \"scroll-view\",\n                    {\n                      style: { height: _vm.winHeight + \"px\" },\n                      attrs: { \"scroll-y\": true, \"lower-threshold\": 200 },\n                      on: { scrolltolower: _vm.scrollToLower },\n                    },\n                    [\n                      _vm.list.length\n                        ? _c(\n                            \"block\",\n                            _vm._l(_vm.list, function (item, index) {\n                              return _c(\n                                \"view\",\n                                { key: index, staticClass: \"card-box\" },\n                                [\n                                  _c(\"image\", {\n                                    attrs: {\n                                      mode: \"widthFix\",\n                                      src: item.mocha_url,\n                                    },\n                                  }),\n                                  _c(\"view\", { staticClass: \"card-bottom\" }, [\n                                    _c(\n                                      \"view\",\n                                      {\n                                        staticClass: \"card-delete\",\n                                        on: {\n                                          tap: function ($event) {\n                                            return _vm.cardDelete(item.oid)\n                                          },\n                                        },\n                                      },\n                                      [_vm._v(\"删除\")]\n                                    ),\n                                    _c(\n                                      \"view\",\n                                      {\n                                        staticClass: \"card-img\",\n                                        on: {\n                                          tap: function ($event) {\n                                            return _vm.downloadMoka(\n                                              item.mocha_url\n                                            )\n                                          },\n                                        },\n                                      },\n                                      [_vm._v(\"下载原图\")]\n                                    ),\n                                  ]),\n                                ]\n                              )\n                            }),\n                            0\n                          )\n                        : _c(\"view\", { staticClass: \"none-data\" }, [\n                            _c(\"image\", {\n                              staticClass: \"none-img\",\n                              attrs: {\n                                src: \"https://yuepai-oss.qubeitech.com/static/images/common/none.png\",\n                                mode: \"aspectFill\",\n                              },\n                            }),\n                            _c(\"view\", [_vm._v(\"当前暂无信息哦～\")]),\n                          ]),\n                    ],\n                    1\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n      _c(\n        \"cover-view\",\n        {\n          class:\n            \"subbtn_bottom_block \" +\n            (_vm.isIphoneX ? \"fix-iphonex-button\" : \"\"),\n        },\n        [\n          _c(\"cover-view\", { staticClass: \"subbtn_bottom\" }, [\n            _c(\"button\", { on: { tap: _vm.makeMoka } }, [_vm._v(\"制作模卡\")]),\n          ]),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {\"navigationBarTitleText\":\"我的模卡\"};\n\n\nvar inst = Page(createPageConfig(component, 'packageMoka/pages/moka/myModelCardlist/index', {root:{cn:[]}}, config || {}))\n\n\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=0e92b52c&scoped=true&\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAZA;AAcA;AAjBA;AAmBA;AACA;AACA;AACA;AA/BA;AAiCA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AAGA;AAJA;AACA;AADA;AAOA;AACA;AARA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAPA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAzGA;AA2GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AAvIA;;;;;;;;;;;;;ACrGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/NA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}