(wx["webpackJsonp"] = wx["webpackJsonp"] || []).push([["packageMoka/pages/moka/makecard/index"],{

/***/ "./node_modules/@tarojs/taro-loader/lib/raw.js!./src/packageMoka/pages/moka/makecard/index.vue":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@tarojs/taro-loader/lib/raw.js!./src/packageMoka/pages/moka/makecard/index.vue ***!
  \*****************************************************************************************************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _index_vue_vue_type_template_id_7a937633_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.vue?vue&type=template&id=7a937633&scoped=true& */ "./src/packageMoka/pages/moka/makecard/index.vue?vue&type=template&id=7a937633&scoped=true&");
/* harmony import */ var _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.vue?vue&type=script&lang=js& */ "./src/packageMoka/pages/moka/makecard/index.vue?vue&type=script&lang=js&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");



function injectStyles (context) {
  
  
}

/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"])(
  _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"],
  _index_vue_vue_type_template_id_7a937633_scoped_true___WEBPACK_IMPORTED_MODULE_0__[/* render */ "a"],
  _index_vue_vue_type_template_id_7a937633_scoped_true___WEBPACK_IMPORTED_MODULE_0__[/* staticRenderFns */ "b"],
  false,
  injectStyles,
  "7a937633",
  "5f8af7a5"
  
)

component.options.__file = "src/packageMoka/pages/moka/makecard/index.vue"
/* harmony default export */ __webpack_exports__["a"] = (component.exports);

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/packageMoka/pages/moka/makecard/index.vue?vue&type=script&lang=js&":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/packageMoka/pages/moka/makecard/index.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _Users_niujun_WeChatProjects_xiamiyuepai_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js */ "./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js");
/* harmony import */ var _Users_niujun_WeChatProjects_xiamiyuepai_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index.scss */ "./src/packageMoka/pages/moka/makecard/index.scss");
/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_index_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _api_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../api/index */ "./src/api/index.js");
/* harmony import */ var _utils_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utils/util */ "./src/utils/util.js");
/* harmony import */ var js_Base64__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js-Base64 */ "./node_modules/js-Base64/base64.mjs");
/* harmony import */ var _utils_clickThrottle__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utils/clickThrottle */ "./src/utils/clickThrottle.js");


//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

var device = wx.getSystemInfoSync(); // 获取设备信息

var width = device.screenWidth; // 示例为一个与屏幕等宽的正方形裁剪框

var height = device.screenHeight;
var statusBarHeight = device.statusBarHeight;

var moka = __webpack_require__(/*! ../../../../assets/js/moka.js */ "./src/assets/js/moka.js");





/* harmony default export */ __webpack_exports__["a"] = ({
  name: "makecard",
  data: function data() {
    return {
      isIphoneX: false,
      showloadingmore: false,
      pageloading: true,
      loadingmore: true,
      isloading: false,
      isposting: false,
      pageshow: "",
      screenW: width * (750 / width),
      screenH: (height - 44 - statusBarHeight) * (750 / width),
      showChangeButton: false,
      changeIndex: -1,
      scrollTop: 0,
      allowScroll: false,
      cutCanvasWH: 1800,
      photos: [],
      cutPhotos: [],
      photoInfos: [],
      scrollInfo: [],
      card: {
        userInfo: {
          x: 0,
          y: 0
        }
      },
      canvasHidden: false,
      userInfo: {},
      isMoveQrcode: 0,
      isDark: true,
      darkStyle: {
        bgColor: "black",
        pageBgColor: "#292b32",
        nameColor: "white",
        propertyColor: "#9B9B9B",
        valueColor: "#D5D5D5"
      },
      lightStyle: {
        bgColor: "white",
        pageBgColor: "#F4F6F7",
        nameColor: "#15161D",
        propertyColor: "#9B9B9B",
        valueColor: "#15161D"
      },
      avartar: "",
      logoAvartar: "",
      blackLogoAvartar: "",
      showMaking: false,
      invite_count: 1,
      tipmoveqrcode_task1: false,
      tipmoveqrcode_task2: false,
      blackCode: "",
      whiteCode: "",
      uploadData: {},
      moka_code: "",
      n: false,
      h: false,
      t: "",
      sub_user_id: ""
    };
  },
  methods: {
    touchStart: function touchStart(a) {
      this.allowScroll = false;
      var e = parseInt(a.currentTarget.id);
      this.t = e >= 0 && e < this.photos.length ? e : -1;
      this.n = true;

      if (a.touches.length >= 2) {
        this.h = true;
        var o = a.touches[1].pageX - a.touches[0].pageX,
            s = a.touches[1].pageY - a.touches[0].pageY;
        d = Math.sqrt(o * o + s * s);
      }
    },
    touchMove: function touchMove(a) {
      if (!(this.t < 0 || this.t >= this.scrollInfo.length) && this.n && a.touches.length >= 2) {
        var e = a.touches[1].pageX - a.touches[0].pageX,
            o = a.touches[1].pageY - a.touches[0].pageY,
            s = Math.sqrt(e * e + o * o) - d;

        if (Math.abs(s) >= 0) {
          var i = this.scrollInfo[this.t].scale || 1;
          (i += 4e-4 * s) > 2 && (i = 2), i < 1 && (i = 1), this.scrollInfo[this.t].scale = i, this.scrollInfo = this.scrollInfo;
        }
      }
    },
    touchEnd: function touchEnd(a) {
      if (0 == a.touches.length) {
        if (this.n = false, !this.h) {
          for (var e = a.changedTouches[0], o = -1, s = this.card.layouts, i = 0; i < s.length; i++) {
            var l = s[i];

            if (this.isTouchInLayout(e, l)) {
              o = l.id;
              break;
            }
          }

          var r = this.photos;

          if (-1 != this.t && -1 != o) {
            var d = r[this.t];
            r[this.t] = r[o], r[o] = d, this.photos = r, this.getPhotoInfos();
          }
        }

        this.h = false;
      }
    },
    isTouchInLayout: function isTouchInLayout(t, a) {
      var r = 750 / width;
      var e = this.scrollTop,
          o = r * t.pageX,
          s = r * (t.pageY + e);
      return o > a.x && o < a.x + a.width && s > a.y && s < a.y + a.height;
    },
    sliderChange: function sliderChange(t) {
      this.allowScroll = true;
      var r = 750 / width;
      var a = t.detail.y,
          e = 274 / r,
          o = (this.card.height - this.screenH + 40) / r * a / e;
      this.scrollTop = o;
    },
    switchBirthday: function switchBirthday() {
      this.userInfo.is_birthday = !this.userInfo.is_birthday;
    },
    switchBWH: function switchBWH() {
      this.userInfo.is_bwh = !this.userInfo.is_bwh;
    },
    switchQrcode: function switchQrcode() {
      this.isMoveQrcode ? this.isMoveQrcode = 0 : this.isMoveQrcode = 1;
    },
    switchBg: function switchBg() {
      this.isDark = !this.isDark;
      this.cutAvartar();
    },
    make: function make() {
      if (!Object(_utils_clickThrottle__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"])(5000)) return;
      this.showMaking = true;
      this.makes([], 0);
    },
    makes: function makes(e, o) {
      var _this = this;

      var s,
          i,
          l = this.scrollInfo,
          n = this.photoInfos,
          h = this.photos,
          d = this.card.layouts,
          c = h[o],
          u = d[o],
          f = n[o],
          g = l[o],
          w = this.cutCanvasWH;
      f.width >= f.height ? i = (s = w) / f.width * f.height : s = (i = w) / f.height * f.width;
      var v = s / (f.rotateW * g.scale),
          S = u.height * v,
          p = u.width * v,
          y = wx.createCanvasContext("cutCanvas");
      var r = 750 / width;
      y.clearRect(0, 0, s, i), y.drawImage(c, 0, 0, s, i), y.draw(false, function (s) {
        wx.canvasToTempFilePath({
          x: g.x * v * r,
          y: g.y * v * r,
          width: S,
          height: p,
          destWidth: 2 * S,
          destHeight: 2 * p,
          canvasId: "cutCanvas",
          fileType: "png",
          quality: 1,
          success: function success(s) {
            e[o] = s.tempFilePath;

            if ((o += 1) >= h.length) {
              _this.cutPhotos = e;

              _this.drawMocard();
            } else {
              _this.makes(e, o);
            }
          }
        });
      });
    },
    changePhoto: function changePhoto(t) {
      var a = parseInt(t.currentTarget.id),
          _this = this;

      wx.chooseImage({
        count: 1,
        sizeType: ["compressed"],
        sourceType: ["album"],
        success: function success(t) {
          var o = t.tempFilePaths[0];
          _this.photos[a] = o;

          _this.getPhotoInfos();

          _this.changeIndex = -1;
          _this.showChangeButton = false;
        }
      });
    },
    getPhotoInfos: function getPhotoInfos() {
      !function t(a, e, o) {
        var s = a.photos,
            i = a.card.layouts,
            l = s[o],
            r = i[o];
        wx.getImageInfo({
          src: l,
          success: function success(i) {
            var l, n, h, d;
            i.width / i.height > r.height / r.width ? (n = r.width, l = i.width / i.height * n, h = !0, d = !1) : (l = r.height, n = i.height / i.width * l, h = !1, d = !0);
            var c = {
              width: i.width,
              height: i.height,
              rotateW: l,
              rotateH: n,
              scrollX: h,
              scrollY: d
            };
            e[o] = c;

            if ((o += 1) >= s.length) {
              a.photos = s;
              a.photoInfos = e;
            } else {
              t(a, e, o);
            }
          }
        });
      }(this, [], 0);
    },
    scroll: function scroll(t) {
      this.scrollInfo[t.currentTarget.id].x = t.detail.scrollLeft;
      this.scrollInfo[t.currentTarget.id].y = t.detail.scrollTop;
    },
    tapPhoto: function tapPhoto(t) {
      var a = parseInt(t.currentTarget.id);
      this.changeIndex = a;

      if (this.showChangeButton = !this.showChangeButton) {
        this.changeIndex = this.changeIndex;
        this.showChangeButton = this.showChangeButton;
      }
    },
    cutAvartar: function cutAvartar() {
      var _this = this;

      wx.downloadFile({
        url: this.userInfo.avatar,
        success: function success(res) {
          if (200 === res.statusCode) {
            var e = wx.createCanvasContext("firstCanvas");
            e.save(), e.beginPath(), e.arc(100, 100, 100, 0, 2 * Math.PI, !1), e.clip(), e.drawImage(res.tempFilePath, 0, 0, 200, 200), e.restore(), e.draw(false, function (a) {
              wx.canvasToTempFilePath({
                x: 0,
                y: 0,
                width: 200,
                height: 200,
                destWidth: 200,
                destHeight: 200,
                canvasId: "firstCanvas",
                fileType: "png",
                quality: 1,
                success: function success(a) {
                  _this.avartar = a.tempFilePath;

                  _this.drawAvartar(true);

                  _this.drawAvartar(false);
                },
                fail: function fail(t) {
                  wx.showModal({
                    title: "头像裁剪失败",
                    showCancel: !1
                  });
                }
              });
            });
          }
        }
      });
    },
    drawAvartar: function drawAvartar(t) {
      var _this = this;

      wx.downloadFile({
        url: this.moka_code,
        success: function success(e) {
          if (200 === e.statusCode && t) {
            if (t) {
              _this.blackCode = e.tempFilePath;
            } else {
              _this.whiteCode = e.tempFilePath;
            }

            _this.drawCode(_this);
          }
        }
      });
    },
    drawCode: function drawCode(t) {
      var a = this,
          e = wx.createCanvasContext("firstCanvas");
      e.setFillStyle("white"), e.fillRect(0, 0, 200, 200), e.drawImage(t ? a.blackCode : a.whiteCode, 0, 0, 200, 200), e.drawImage(a.avartar, 55, 55, 90, 90), e.draw(false, function (e) {
        wx.canvasToTempFilePath({
          x: 0,
          y: 0,
          width: 200,
          height: 200,
          destWidth: 200,
          destHeight: 200,
          canvasId: "firstCanvas",
          fileType: "png",
          quality: 1,
          success: function success(e) {
            t.isDark ? a.logoAvartar = e.tempFilePath : a.blackLogoAvartar = e.tempFilePath, a.canvasHidden = true;
          },
          fail: function fail(t) {
            wx.showModal({
              title: "头像绘制失败",
              showCancel: false
            });
          }
        });
      });
    },
    drawMocard: function drawMocard() {
      var t = this,
          a = t.card.height,
          o = t.card.width,
          s = wx.createCanvasContext("cutCanvas"),
          i = {};
      i = t.isDark ? t.darkStyle : t.lightStyle, s.setFillStyle(i.bgColor), s.fillRect(0, 0, a, o), "cebian" == t.card.type || "charu" == t.card.type ? t.drawUserInfoWithCebian(s) : "dibu" == t.card.type && t.drawUserInfoWithDibu(s), t.drawPhotos(s);
      var l = "android" == device.platform,
          r = l ? 2 : 1.8;
      s.draw(false, function (s) {
        "drawCanvas:ok" == s.errMsg && wx.canvasToTempFilePath({
          x: 0,
          y: 0,
          width: a,
          height: o,
          destWidth: a * r,
          destHeight: o * r,
          canvasId: "cutCanvas",
          fileType: "png",
          quality: 1,
          success: function success(a) {
            var o = t.card.cardId,
                s = t.card.name;
            t.uploadFilePath(a.tempFilePath, t, o, s);
          },
          fail: function fail(a) {
            wx.hideToast(), t.showMaking = false, wx.showModal({
              title: "模卡保存失败",
              showCancel: false
            });
          }
        });
      });
    },
    uploadFilePath: function uploadFilePath(t, a, o, s) {
      if (a.isposting) return;
      a.isposting = !0;
      var i = 1;
      a.isMoveQrcode && (i = 0);
      var l = {
        sub_user_id: a.userInfo.sub_user_id,
        has_qrcode: i,
        template_id: o,
        template_name: s
      };
      this.upImgs(t, i);
    },
    drawUserInfoWithCebian: function drawUserInfoWithCebian(a) {
      var e = this.userInfo,
          o = (this.card.userInfo.x, this.card.userInfo.Y, this.card.userInfo.height, this.card.userInfo.width, 55);
      this.isMoveQrcode && (o += 65), e.is_bwh || (o += 80), e.is_birthday || (o += 25);
      var s = 40 + this.card.userInfo.y,
          i = o,
          l = {},
          r = (l = this.isDark ? this.darkStyle : this.lightStyle).propertyColor,
          n = l.valueColor;
      a.setFontSize(32), a.setFillStyle(n), a.fillText(e.nickname, s, i);
      var h = 8;

      if (this.isMoveQrcode && (h = 10), i += 40, a.setFontSize(18), a.setFillStyle(r), a.fillText("身高 HEIGHT", s, i), i += 25, a.setFontSize(18), a.setFillStyle(n), a.fillText(e.height + "cm", s, i), i += 22 + h, a.setFontSize(18), a.setFillStyle(r), a.fillText("体重 WEIGHT", s, i), i += 25, a.setFontSize(18), a.setFillStyle(n), a.fillText(e.weight + "kg", s, i), e.is_bwh && (i += 22 + h, a.setFontSize(18), a.setFillStyle(r), a.fillText("胸围 BUST", s, i), i += 25, a.setFontSize(18), a.setFillStyle(n), a.fillText(e.bwh_b, s, i), i += 22 + h, a.setFontSize(18), a.setFillStyle(r), a.fillText("腰围 WAIST", s, i), i += 25, a.setFontSize(18), a.setFillStyle(n), a.fillText(e.bwh_w, s, i), i += 22 + h, a.setFontSize(18), a.setFillStyle(r), a.fillText("臀围 HIPS", s, i), i += 25, a.setFontSize(18), a.setFillStyle(n), a.fillText(e.bwh_h, s, i)), i += 22 + h, a.setFontSize(18), a.setFillStyle(r), a.fillText("鞋码 SHOES", s, i), i += 25, a.setFontSize(18), a.setFillStyle(n), a.fillText(e.shoe, s, i), e.is_birthday && (i += 22 + h, a.setFontSize(18), a.setFillStyle(r), a.fillText("生日 BIRTH", s, i), i += 25, a.setFontSize(18), a.setFillStyle(n), a.fillText(e.birthday, s, i)), !this.isMoveQrcode) {
        i += 30;
        a.drawImage(this.isDark ? this.logoAvartar : this.blackLogoAvartar, s, i, 120, 120);
      }
    },
    drawUserInfoWithDibu: function drawUserInfoWithDibu(a) {
      var e = this.userInfo,
          o = (this.card.userInfo.x, this.card.userInfo.Y, this.card.userInfo.height, this.card.userInfo.width, 67),
          s = 580,
          i = {},
          l = (i = this.isDark ? this.darkStyle : this.lightStyle).propertyColor,
          r = i.valueColor;
      a.setFontSize(32), a.setFillStyle(r), a.fillText(e.nickname, o, s);
      s = 560, o += 160, a.setFontSize(18), a.setFillStyle(l), a.fillText("身高HEIGHT", o, s), s += 31, a.setFontSize(18), a.setFillStyle(r), a.fillText(e.height + "cm", o, s), s = 560, o += 140, a.setFontSize(18), a.setFillStyle(l), a.fillText("体重WEIGHT", o, s), s += 31, a.setFontSize(18), a.setFillStyle(r), a.fillText(e.weight + "kg", o, s), e.is_bwh && (s = 560, o += 140, a.setFontSize(18), a.setFillStyle(l), a.fillText("胸围BUST", o, s), s += 31, a.setFontSize(18), a.setFillStyle(r), a.fillText(e.bwh_b, o, s), s = 560, o += 140, a.setFontSize(18), a.setFillStyle(l), a.fillText("腰围WAIST", o, s), s += 31, a.setFontSize(18), a.setFillStyle(r), a.fillText(e.bwh_w, o, s), s = 560, o += 140, a.setFontSize(18), a.setFillStyle(l), a.fillText("臀围HIPS", o, s), s += 31, a.setFontSize(18), a.setFillStyle(r), a.fillText(e.bwh_h, o, s)), s = 560, o += 140, a.setFontSize(18), a.setFillStyle(l), a.fillText("鞋码SHOES", o, s), s += 31, a.setFontSize(18), a.setFillStyle(r), a.fillText(e.shoe, o, s), e.is_birthday && (s = 560, o += 140, a.setFontSize(18), a.setFillStyle(l), a.fillText("生日BIRTH", o, s), s += 31, a.setFontSize(18), a.setFillStyle(r), a.fillText(e.birthday, o, s));
      o = this.card.userInfo.height - 80 - 30, s = 530;
      this.isMoveQrcode || a.drawImage(this.isDark ? this.logoAvartar : this.blackLogoAvartar, o, s, 80, 80);
    },
    drawPhotos: function drawPhotos(a) {
      for (var e = this.cutPhotos, o = this.card.layouts, s = this.card.width, i = 0; i < e.length; i++) {
        var l = e[i],
            r = o[i],
            n = r.y + 2,
            h = s - r.x - r.width + 2,
            d = r.height - 4,
            c = r.width - 4;
        a.drawImage(l, n, h, d, c);
      }
    },
    upImgs: function upImgs(tempFilePath, i) {
      var _this2 = this;

      var header = {};

      var _this = this;

      var token = wx.getStorageSync("token");
      header["Authorization"] = "Basic " + js_Base64__WEBPACK_IMPORTED_MODULE_5__[/* Base64 */ "a"].encode(token + ":");
      wx.uploadFile({
        url: "https://pai.qubeitech.com/v1/file/upload",
        filePath: tempFilePath,
        formData: {
          scr_type: "mocha"
        },
        name: "file",
        header: header,
        success: function success(res) {
          wx.hideLoading(); //判断上传的是图片还是视频

          var data = JSON.parse(res.data);

          if (data.code == 200) {
            var params = {
              mocha_url: data.data.file1
            };

            if (_this.sub_user_id) {
              params.sub_uuid = _this.sub_user_id;
            }

            _this.userMocha(data.data.file1, i, params);
          } else {
            wx.showToast({
              title: "上传失败！",
              icon: "none"
            });
          }
        },
        fail: function fail(error) {
          wx.hideLoading();
          _this2.showMaking = false;
          wx.showToast({
            title: "上传失败！",
            icon: "none"
          });
        }
      });
    },
    qrcode: function qrcode(params) {
      var _this3 = this;

      return Object(_Users_niujun_WeChatProjects_xiamiyuepai_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])( /*#__PURE__*/Object(_Users_niujun_WeChatProjects_xiamiyuepai_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])().mark(function _callee() {
        var res;
        return Object(_Users_niujun_WeChatProjects_xiamiyuepai_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.prev = 0;
                _context.next = 3;
                return Object(_api_index__WEBPACK_IMPORTED_MODULE_3__[/* qrcode */ "Tb"])(params);

              case 3:
                res = _context.sent;
                _this3.moka_code = res.data.data;

                _this3.cutAvartar();

                _context.next = 10;
                break;

              case 8:
                _context.prev = 8;
                _context.t0 = _context["catch"](0);

              case 10:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, null, [[0, 8]]);
      }))();
    },
    userMocha: function userMocha(file, i, params) {
      var _this4 = this;

      return Object(_Users_niujun_WeChatProjects_xiamiyuepai_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"])( /*#__PURE__*/Object(_Users_niujun_WeChatProjects_xiamiyuepai_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])().mark(function _callee2() {
        var res;
        return Object(_Users_niujun_WeChatProjects_xiamiyuepai_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])().wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.prev = 0;
                _context2.next = 3;
                return Object(_api_index__WEBPACK_IMPORTED_MODULE_3__[/* userMocha */ "Kc"])(params);

              case 3:
                res = _context2.sent;
                _this4.showMaking = false;
                wx.setStorageSync("successImgSrc", file);
                Object(_utils_util__WEBPACK_IMPORTED_MODULE_4__[/* openPage */ "d"])("/packageMoka/pages/moka/makesuccess/index?vertical=0&has_qrcode=" + i);
                _context2.next = 11;
                break;

              case 9:
                _context2.prev = 9;
                _context2.t0 = _context2["catch"](0);

              case 11:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, null, [[0, 9]]);
      }))();
    }
  },
  onLoad: function onLoad(options) {
    var cardid = wx.getStorageSync("cardid");
    var mokaIndex = moka.getIndexByCardId(cardid);
    this.card = moka.layouts[mokaIndex];
    this.photos = wx.getStorageSync("selectedPhotos");
    this.userInfo = wx.getStorageSync("carduserinfo");

    if (options.sub_user_id) {
      this.sub_user_id = options.sub_user_id;
    }

    var l = [];

    for (var r = 0; r < this.photos.length; r++) {
      l.push({
        x: 0,
        y: 0,
        scale: 1
      });
    }

    this.scrollInfo = l;
    this.qrcode({
      source: "homepage"
    });
    this.getPhotoInfos();
  }
});

/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/packageMoka/pages/moka/makecard/index.vue?vue&type=template&id=7a937633&scoped=true&":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/packageMoka/pages/moka/makecard/index.vue?vue&type=template&id=7a937633&scoped=true& ***!
  \********************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/*! exports used: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return staticRenderFns; });
var render = function () {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  return _c("view", [
    _c(
      "view",
      {
        staticClass: "container",
        style: { backgroundColor: _vm.darkStyle.pageBgColor },
      },
      [
        _c(
          "view",
          {
            directives: [
              {
                name: "show",
                rawName: "v-show",
                value: _vm.showMaking,
                expression: "showMaking",
              },
            ],
            staticClass: "making",
            style: { top: (_vm.screenH - 200) * 0.5 + "rpx" },
          },
          [
            _c("view", { staticClass: "making-icon" }, [
              _c("image", {
                attrs: {
                  src: "https://yuepai-oss.qubeitech.com/static/images/moka/makecard/loading.gif",
                },
              }),
            ]),
            _c("text", { staticClass: "making-text" }, [
              _vm._v("制作中，请稍候"),
            ]),
          ]
        ),
        _c(
          "view",
          {
            staticClass: "slider",
            style: { top: (_vm.screenH - 458) * 0.5 + "rpx" },
            on: { touchStart: _vm.touchStart },
          },
          [
            _c(
              "movable-area",
              { staticClass: "slider-bg" },
              [
                _c(
                  "movable-view",
                  {
                    staticClass: "slider-btn",
                    attrs: { direction: "all", scale: false, x: 0, y: 0 },
                    on: { change: _vm.sliderChange },
                  },
                  [
                    _c("image", {
                      attrs: {
                        src: "https://yuepai-oss.qubeitech.com/static/images/moka/makecard/slider_v.png",
                      },
                    }),
                  ]
                ),
              ],
              1
            ),
          ],
          1
        ),
        _c(
          "view",
          {
            staticClass: "moka-container",
            style: {
              height: _vm.screenH + "rpx",
              width: _vm.card.width + "rpx",
            },
          },
          [
            _c(
              "scroll-view",
              {
                class: _vm.isDark
                  ? "main-scrollview-black"
                  : "main-scrollview-white",
                staticStyle: { height: "100%", width: "100%" },
                attrs: { scrollTop: _vm.scrollTop, scrollY: _vm.allowScroll },
              },
              [
                _c(
                  "movable-area",
                  {
                    staticClass: "photos-container",
                    style: {
                      height: _vm.card.height + "rpx",
                      width: _vm.card.width + "rpx",
                      backgroundColor: _vm.isDark
                        ? _vm.darkStyle.bgColor
                        : _vm.lightStyle.bgColor,
                    },
                  },
                  [
                    _c(
                      "movable-view",
                      {
                        staticClass: "userinfo",
                        style: {
                          height: _vm.card.userInfo.height + "rpx",
                          width: _vm.card.userInfo.width + "rpx",
                        },
                        attrs: {
                          disabled: true,
                          outOfBounds: true,
                          scale: false,
                          x: _vm.card.userInfo.x + "rpx",
                          y: _vm.card.userInfo.y + "rpx",
                        },
                      },
                      [
                        _vm.card.type == "charu" || _vm.card.type == "cebian"
                          ? _c(
                              "view",
                              {
                                staticClass: "userinfo-container",
                                style: {
                                  height: _vm.card.userInfo.width + "rpx",
                                  width: _vm.card.userInfo.height + "rpx",
                                  transform:
                                    "rotate(90deg) translate(" +
                                    (-_vm.card.userInfo.offset + "rpx") +
                                    ", " +
                                    (-_vm.card.userInfo.offset + "rpx") +
                                    ")",
                                },
                              },
                              [
                                _c("view", { staticClass: "userinfo-info" }, [
                                  _vm.isMoveQrcode
                                    ? _c("view", {
                                        staticClass: "cebian_move_qrcode",
                                      })
                                    : _vm._e(),
                                  !_vm.userInfo.is_bwh
                                    ? _c("view", {
                                        staticClass: "cebian_move_bwh",
                                      })
                                    : _vm._e(),
                                  !_vm.userInfo.is_birthday
                                    ? _c("view", {
                                        staticClass: "cebian_move_birthday",
                                      })
                                    : _vm._e(),
                                  _c(
                                    "text",
                                    {
                                      staticClass: "name",
                                      style: {
                                        color: _vm.isDark
                                          ? _vm.darkStyle.nameColor
                                          : _vm.lightStyle.nameColor,
                                      },
                                    },
                                    [_vm._v(_vm._s(_vm.userInfo.nickname))]
                                  ),
                                  _c("view", { staticClass: "item-cebian" }, [
                                    _c(
                                      "text",
                                      {
                                        staticClass: "property",
                                        style: {
                                          color: _vm.isDark
                                            ? _vm.darkStyle.propertyColor
                                            : _vm.lightStyle.propertyColor,
                                        },
                                      },
                                      [_vm._v("身高 HEIGHT")]
                                    ),
                                    _c(
                                      "text",
                                      {
                                        staticClass: "value",
                                        style: {
                                          color: _vm.isDark
                                            ? _vm.darkStyle.valueColor
                                            : _vm.lightStyle.valueColor,
                                        },
                                      },
                                      [
                                        _vm._v(
                                          _vm._s(_vm.userInfo.height) + "cm"
                                        ),
                                      ]
                                    ),
                                  ]),
                                  _c("view", { staticClass: "item-cebian" }, [
                                    _c(
                                      "text",
                                      {
                                        staticClass: "property",
                                        style: {
                                          color: _vm.isDark
                                            ? _vm.darkStyle.propertyColor
                                            : _vm.lightStyle.propertyColor,
                                        },
                                      },
                                      [_vm._v("体重 HEIGHT")]
                                    ),
                                    _c(
                                      "text",
                                      {
                                        staticClass: "value",
                                        style: {
                                          color: _vm.isDark
                                            ? _vm.darkStyle.valueColor
                                            : _vm.lightStyle.valueColor,
                                        },
                                      },
                                      [
                                        _vm._v(
                                          _vm._s(_vm.userInfo.weight) + "kg"
                                        ),
                                      ]
                                    ),
                                  ]),
                                  _vm.userInfo.is_bwh
                                    ? _c(
                                        "view",
                                        { staticClass: "item-cebian" },
                                        [
                                          _c(
                                            "text",
                                            {
                                              staticClass: "property",
                                              style: {
                                                color: _vm.isDark
                                                  ? _vm.darkStyle.propertyColor
                                                  : _vm.lightStyle
                                                      .propertyColor,
                                              },
                                            },
                                            [_vm._v("胸围 BUST")]
                                          ),
                                          _c(
                                            "text",
                                            {
                                              staticClass: "value",
                                              style: {
                                                color: _vm.isDark
                                                  ? _vm.darkStyle.valueColor
                                                  : _vm.lightStyle.valueColor,
                                              },
                                            },
                                            [_vm._v(_vm._s(_vm.userInfo.bwh_b))]
                                          ),
                                        ]
                                      )
                                    : _vm._e(),
                                  _vm.userInfo.is_bwh
                                    ? _c(
                                        "view",
                                        { staticClass: "item-cebian" },
                                        [
                                          _c(
                                            "text",
                                            {
                                              staticClass: "property",
                                              style: {
                                                color: _vm.isDark
                                                  ? _vm.darkStyle.propertyColor
                                                  : _vm.lightStyle
                                                      .propertyColor,
                                              },
                                            },
                                            [_vm._v("腰围 WAIST")]
                                          ),
                                          _c(
                                            "text",
                                            {
                                              staticClass: "value",
                                              style: {
                                                color: _vm.isDark
                                                  ? _vm.darkStyle.valueColor
                                                  : _vm.lightStyle.valueColor,
                                              },
                                            },
                                            [_vm._v(_vm._s(_vm.userInfo.bwh_w))]
                                          ),
                                        ]
                                      )
                                    : _vm._e(),
                                  _vm.userInfo.is_bwh
                                    ? _c(
                                        "view",
                                        { staticClass: "item-cebian" },
                                        [
                                          _c(
                                            "text",
                                            {
                                              staticClass: "property",
                                              style: {
                                                color: _vm.isDark
                                                  ? _vm.darkStyle.propertyColor
                                                  : _vm.lightStyle
                                                      .propertyColor,
                                              },
                                            },
                                            [_vm._v("臀围 HIPS")]
                                          ),
                                          _c(
                                            "text",
                                            {
                                              staticClass: "value",
                                              style: {
                                                color: _vm.isDark
                                                  ? _vm.darkStyle.valueColor
                                                  : _vm.lightStyle.valueColor,
                                              },
                                            },
                                            [_vm._v(_vm._s(_vm.userInfo.bwh_h))]
                                          ),
                                        ]
                                      )
                                    : _vm._e(),
                                  _c("view", { staticClass: "item-cebian" }, [
                                    _c(
                                      "text",
                                      {
                                        staticClass: "property",
                                        style: {
                                          color: _vm.isDark
                                            ? _vm.darkStyle.propertyColor
                                            : _vm.lightStyle.propertyColor,
                                        },
                                      },
                                      [_vm._v("鞋码 SHOES")]
                                    ),
                                    _c(
                                      "text",
                                      {
                                        staticClass: "value",
                                        style: {
                                          color: _vm.isDark
                                            ? _vm.darkStyle.valueColor
                                            : _vm.lightStyle.valueColor,
                                        },
                                      },
                                      [_vm._v(_vm._s(_vm.userInfo.shoe))]
                                    ),
                                  ]),
                                  _vm.userInfo.is_birthday
                                    ? _c(
                                        "view",
                                        { staticClass: "item-cebian" },
                                        [
                                          _c(
                                            "text",
                                            {
                                              staticClass: "property",
                                              style: {
                                                color: _vm.isDark
                                                  ? _vm.darkStyle.propertyColor
                                                  : _vm.lightStyle
                                                      .propertyColor,
                                              },
                                            },
                                            [_vm._v("生日 BIRTH")]
                                          ),
                                          _c(
                                            "text",
                                            {
                                              staticClass: "value",
                                              style: {
                                                color: _vm.isDark
                                                  ? _vm.darkStyle.valueColor
                                                  : _vm.lightStyle.valueColor,
                                              },
                                            },
                                            [
                                              _vm._v(
                                                _vm._s(_vm.userInfo.birthday)
                                              ),
                                            ]
                                          ),
                                        ]
                                      )
                                    : _vm._e(),
                                  !_vm.isMoveQrcode
                                    ? _c("image", {
                                        attrs: {
                                          mode: "aspectFit",
                                          src: _vm.isDark
                                            ? _vm.logoAvartar
                                            : _vm.blackLogoAvartar,
                                        },
                                      })
                                    : _vm._e(),
                                ]),
                              ]
                            )
                          : _vm._e(),
                        _vm.card.type == "dibu"
                          ? _c(
                              "view",
                              {
                                staticClass: "userinfo-container",
                                style: {
                                  height: _vm.card.userInfo.width + "rpx",
                                  width: _vm.card.userInfo.height + "rpx",
                                  transform:
                                    "rotate(90deg) translate(" +
                                    (-_vm.card.userInfo.offset + "rpx") +
                                    ", " +
                                    (-_vm.card.userInfo.offset + "rpx") +
                                    ")",
                                },
                              },
                              [
                                _c(
                                  "view",
                                  { staticClass: "userinfo-info-dibu" },
                                  [
                                    _c(
                                      "view",
                                      {
                                        staticClass: "userinfo-info-dibu-left",
                                      },
                                      [
                                        _c(
                                          "text",
                                          {
                                            staticClass: "name-dibu",
                                            style: {
                                              color: _vm.isDark
                                                ? _vm.darkStyle.nameColor
                                                : _vm.lightStyle.nameColor,
                                            },
                                          },
                                          [
                                            _vm._v(
                                              _vm._s(_vm.userInfo.nickname)
                                            ),
                                          ]
                                        ),
                                        _c(
                                          "view",
                                          { staticClass: "item-dibu" },
                                          [
                                            _c(
                                              "text",
                                              {
                                                staticClass: "property-dibu",
                                                style: {
                                                  color: _vm.isDark
                                                    ? _vm.darkStyle
                                                        .propertyColor
                                                    : _vm.lightStyle
                                                        .propertyColor,
                                                },
                                              },
                                              [_vm._v("身高 HEIGHT")]
                                            ),
                                            _c(
                                              "text",
                                              {
                                                staticClass: "value-dibu",
                                                style: {
                                                  color: _vm.isDark
                                                    ? _vm.darkStyle.valueColor
                                                    : _vm.lightStyle.valueColor,
                                                },
                                              },
                                              [
                                                _vm._v(
                                                  _vm._s(_vm.userInfo.height) +
                                                    "cm"
                                                ),
                                              ]
                                            ),
                                          ]
                                        ),
                                        _c(
                                          "view",
                                          { staticClass: "item-dibu" },
                                          [
                                            _c(
                                              "text",
                                              {
                                                staticClass: "property-dibu",
                                                style: {
                                                  color: _vm.isDark
                                                    ? _vm.darkStyle
                                                        .propertyColor
                                                    : _vm.lightStyle
                                                        .propertyColor,
                                                },
                                              },
                                              [_vm._v("体重 HEIGHT")]
                                            ),
                                            _c(
                                              "text",
                                              {
                                                staticClass: "value-dibu",
                                                style: {
                                                  color: _vm.isDark
                                                    ? _vm.darkStyle.valueColor
                                                    : _vm.lightStyle.valueColor,
                                                },
                                              },
                                              [
                                                _vm._v(
                                                  _vm._s(_vm.userInfo.weight) +
                                                    "kg"
                                                ),
                                              ]
                                            ),
                                          ]
                                        ),
                                        _vm.userInfo.is_bwh
                                          ? _c(
                                              "view",
                                              { staticClass: "item-dibu" },
                                              [
                                                _c(
                                                  "text",
                                                  {
                                                    staticClass:
                                                      "property-dibu",
                                                    style: {
                                                      color: _vm.isDark
                                                        ? _vm.darkStyle
                                                            .propertyColor
                                                        : _vm.lightStyle
                                                            .propertyColor,
                                                    },
                                                  },
                                                  [_vm._v("胸围 BUST")]
                                                ),
                                                _c(
                                                  "text",
                                                  {
                                                    staticClass: "value-dibu",
                                                    style: {
                                                      color: _vm.isDark
                                                        ? _vm.darkStyle
                                                            .valueColor
                                                        : _vm.lightStyle
                                                            .valueColor,
                                                    },
                                                  },
                                                  [
                                                    _vm._v(
                                                      _vm._s(_vm.userInfo.bwh_b)
                                                    ),
                                                  ]
                                                ),
                                              ]
                                            )
                                          : _vm._e(),
                                        _vm.userInfo.is_bwh
                                          ? _c(
                                              "view",
                                              { staticClass: "item-dibu" },
                                              [
                                                _c(
                                                  "text",
                                                  {
                                                    staticClass:
                                                      "property-dibu",
                                                    style: {
                                                      color: _vm.isDark
                                                        ? _vm.darkStyle
                                                            .propertyColor
                                                        : _vm.lightStyle
                                                            .propertyColor,
                                                    },
                                                  },
                                                  [_vm._v("腰围 WAIST")]
                                                ),
                                                _c(
                                                  "text",
                                                  {
                                                    staticClass: "value-dibu",
                                                    style: {
                                                      color: _vm.isDark
                                                        ? _vm.darkStyle
                                                            .valueColor
                                                        : _vm.lightStyle
                                                            .valueColor,
                                                    },
                                                  },
                                                  [
                                                    _vm._v(
                                                      _vm._s(_vm.userInfo.bwh_w)
                                                    ),
                                                  ]
                                                ),
                                              ]
                                            )
                                          : _vm._e(),
                                        _vm.userInfo.is_bwh
                                          ? _c(
                                              "view",
                                              { staticClass: "item-dibu" },
                                              [
                                                _c(
                                                  "text",
                                                  {
                                                    staticClass:
                                                      "property-dibu",
                                                    style: {
                                                      color: _vm.isDark
                                                        ? _vm.darkStyle
                                                            .propertyColor
                                                        : _vm.lightStyle
                                                            .propertyColor,
                                                    },
                                                  },
                                                  [_vm._v("臀围 HIPS")]
                                                ),
                                                _c(
                                                  "text",
                                                  {
                                                    staticClass: "value-dibu",
                                                    style: {
                                                      color: _vm.isDark
                                                        ? _vm.darkStyle
                                                            .valueColor
                                                        : _vm.lightStyle
                                                            .valueColor,
                                                    },
                                                  },
                                                  [
                                                    _vm._v(
                                                      _vm._s(_vm.userInfo.bwh_h)
                                                    ),
                                                  ]
                                                ),
                                              ]
                                            )
                                          : _vm._e(),
                                        _c(
                                          "view",
                                          { staticClass: "item-dibu" },
                                          [
                                            _c(
                                              "text",
                                              {
                                                staticClass: "property-dibu",
                                                style: {
                                                  color: _vm.isDark
                                                    ? _vm.darkStyle
                                                        .propertyColor
                                                    : _vm.lightStyle
                                                        .propertyColor,
                                                },
                                              },
                                              [_vm._v("鞋码 SHOES")]
                                            ),
                                            _c(
                                              "text",
                                              {
                                                staticClass: "value-dibu",
                                                style: {
                                                  color: _vm.isDark
                                                    ? _vm.darkStyle.valueColor
                                                    : _vm.lightStyle.valueColor,
                                                },
                                              },
                                              [
                                                _vm._v(
                                                  _vm._s(_vm.userInfo.shoe)
                                                ),
                                              ]
                                            ),
                                          ]
                                        ),
                                        _vm.userInfo.is_birthday
                                          ? _c(
                                              "view",
                                              { staticClass: "item-dibu" },
                                              [
                                                _c(
                                                  "text",
                                                  {
                                                    staticClass:
                                                      "property-dibu",
                                                    style: {
                                                      color: _vm.isDark
                                                        ? _vm.darkStyle
                                                            .propertyColor
                                                        : _vm.lightStyle
                                                            .propertyColor,
                                                    },
                                                  },
                                                  [_vm._v("生日 BIRTH")]
                                                ),
                                                _c(
                                                  "text",
                                                  {
                                                    staticClass: "value-dibu",
                                                    style: {
                                                      color: _vm.isDark
                                                        ? _vm.darkStyle
                                                            .valueColor
                                                        : _vm.lightStyle
                                                            .valueColor,
                                                    },
                                                  },
                                                  [
                                                    _vm._v(
                                                      _vm._s(
                                                        _vm.userInfo.birthday
                                                      )
                                                    ),
                                                  ]
                                                ),
                                              ]
                                            )
                                          : _vm._e(),
                                      ]
                                    ),
                                    !_vm.isMoveQrcode
                                      ? _c("image", {
                                          attrs: {
                                            mode: "aspectFit",
                                            src: _vm.isDark
                                              ? _vm.logoAvartar
                                              : _vm.blackLogoAvartar,
                                          },
                                        })
                                      : _vm._e(),
                                  ]
                                ),
                              ]
                            )
                          : _vm._e(),
                      ]
                    ),
                    _vm._l(_vm.card.layouts, function (item, index) {
                      return _c(
                        "movable-view",
                        {
                          key: index,
                          staticClass: "layout",
                          style: {
                            height: item.height + "rpx",
                            width: item.width + "rpx",
                          },
                          attrs: {
                            disabled: true,
                            id: item.id,
                            outOfBounds: true,
                            scale: false,
                            x: item.x + "rpx",
                            y: item.y + "rpx",
                          },
                        },
                        [
                          index < _vm.photoInfos.length
                            ? _c(
                                "scroll-view",
                                {
                                  staticClass: "photo-container",
                                  style: {
                                    height: item.width + "rpx",
                                    width: item.height + "rpx",
                                    transform:
                                      "rotate(90deg) translate(" +
                                      (-item.offset + "rpx") +
                                      ", " +
                                      (-item.offset + "rpx") +
                                      ")",
                                    border:
                                      "1px solid " +
                                      (_vm.isDark
                                        ? _vm.darkStyle.bgColor
                                        : _vm.lightStyle.bgColor),
                                  },
                                  attrs: {
                                    id: item.id,
                                    scrollX:
                                      _vm.photoInfos[index].scrollX ||
                                      _vm.scrollInfo[index].scale != 1,
                                    scrollY:
                                      _vm.photoInfos[index].scrollY ||
                                      _vm.scrollInfo[index].scale != 1,
                                  },
                                  on: {
                                    scroll: _vm.scroll,
                                    tap: _vm.tapPhoto,
                                    touchEnd: _vm.touchEnd,
                                    touchMove: _vm.touchMove,
                                    touchStart: _vm.touchStart,
                                  },
                                },
                                [
                                  _c("image", {
                                    staticClass: "rotate",
                                    style: {
                                      height:
                                        _vm.photoInfos[index].rotateH *
                                          (_vm.scrollInfo[index].scale || 1) +
                                        "rpx",
                                      width:
                                        _vm.photoInfos[index].rotateW *
                                          (_vm.scrollInfo[index].scale || 1) +
                                        "rpx",
                                      verticalAlign: "middle",
                                    },
                                    attrs: { src: _vm.photos[index] },
                                  }),
                                ]
                              )
                            : _vm._e(),
                          _c(
                            "view",
                            {
                              directives: [
                                {
                                  name: "show",
                                  rawName: "v-show",
                                  value:
                                    _vm.showChangeButton &&
                                    index == _vm.changeIndex,
                                  expression:
                                    "showChangeButton && index == changeIndex",
                                },
                              ],
                              staticClass: "change",
                              style: {
                                top: (item.height - 100) * 0.5 + "rpx",
                                right: (item.width - 100) * 0.5 + "rpx",
                              },
                              attrs: { id: item.id },
                              on: { tap: _vm.changePhoto },
                            },
                            [_vm._v("替换")]
                          ),
                        ],
                        1
                      )
                    }),
                  ],
                  2
                ),
              ],
              1
            ),
          ],
          1
        ),
        _c(
          "scroll-view",
          {
            style: {
              height: _vm.screenH + "rpx",
              width: 750 - _vm.card.width + "rpx",
            },
          },
          [
            _c(
              "view",
              {
                staticClass: "header",
                style: {
                  height: 750 - _vm.card.width + "rpx",
                  width: _vm.screenH + "rpx",
                  transform:
                    "rotate(90deg) translate(" +
                    ((_vm.screenH - 750 + _vm.card.width) / 2 + "rpx") +
                    ", " +
                    ((_vm.screenH - 750 + _vm.card.width) / 2 + "rpx") +
                    ")",
                },
              },
              [
                _c("view", { staticClass: "title" }, [
                  _c("view", { staticClass: "move" }, [_vm._v("拖拽挪动")]),
                ]),
                _c("view", { staticClass: "operation" }, [
                  _c(
                    "view",
                    {
                      staticClass: "switch switch_birth",
                      on: { tap: _vm.switchBirthday },
                    },
                    [
                      _vm.userInfo.is_birthday
                        ? _c("image", {
                            staticClass: "icon_check",
                            attrs: {
                              src: "https://yuepai-oss.qubeitech.com/static/images/moka/makecard/birthday1.png",
                            },
                          })
                        : _c("image", {
                            staticClass: "icon_check",
                            attrs: {
                              src: "https://yuepai-oss.qubeitech.com/static/images/moka/makecard/birthday0.png",
                            },
                          }),
                    ]
                  ),
                  _c(
                    "view",
                    {
                      staticClass: "switch switch_bwh",
                      on: { tap: _vm.switchBWH },
                    },
                    [
                      _vm.userInfo.is_bwh
                        ? _c("image", {
                            staticClass: "icon_check",
                            attrs: {
                              src: "https://yuepai-oss.qubeitech.com/static/images/moka/makecard/bwh1.png",
                            },
                          })
                        : _c("image", {
                            staticClass: "icon_check",
                            attrs: {
                              src: "https://yuepai-oss.qubeitech.com/static/images/moka/makecard/bwh0.png",
                            },
                          }),
                    ]
                  ),
                  !_vm.userInfo.sub_user_id
                    ? _c(
                        "view",
                        {
                          staticClass: "switch switch_bwh",
                          on: { tap: _vm.switchQrcode },
                        },
                        [
                          _vm.isMoveQrcode
                            ? _c("image", {
                                staticClass: "icon_check_qrcode",
                                attrs: {
                                  src: "https://yuepai-oss.qubeitech.com/static/images/moka/makecard/qrcode0.png",
                                },
                              })
                            : _c("image", {
                                staticClass: "icon_check_qrcode",
                                attrs: {
                                  src: "https://yuepai-oss.qubeitech.com/static/images/moka/makecard/qrcode1.png",
                                },
                              }),
                        ]
                      )
                    : _vm._e(),
                  _c(
                    "view",
                    {
                      staticClass: "switch switch_bg",
                      on: { tap: _vm.switchBg },
                    },
                    [
                      _c("image", {
                        staticClass: "icon_switchbg",
                        attrs: {
                          src: "https://yuepai-oss.qubeitech.com/static/images/moka/makecard/switchbg.png",
                        },
                      }),
                    ]
                  ),
                  _c("view", { staticClass: "make", on: { tap: _vm.make } }, [
                    _vm._v("制作"),
                  ]),
                ]),
              ]
            ),
          ]
        ),
      ],
      1
    ),
    _c(
      "view",
      { staticStyle: { width: "0px", height: "0px", overflow: "hidden" } },
      [
        _c("canvas", {
          style: {
            width: _vm.cutCanvasWH + "px",
            height: _vm.cutCanvasWH + "px",
          },
          attrs: { canvasId: "cutCanvas" },
        }),
      ]
    ),
    _c(
      "view",
      { staticStyle: { width: "0px", height: "0px", overflow: "hidden" } },
      [
        _c("canvas", {
          staticStyle: { width: "200px", height: "200px" },
          attrs: { canvasId: "firstCanvas" },
        }),
      ]
    ),
  ])
}
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ "./src/packageMoka/pages/moka/makecard/index.scss":
/*!********************************************************!*\
  !*** ./src/packageMoka/pages/moka/makecard/index.scss ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./src/packageMoka/pages/moka/makecard/index.vue":
/*!*******************************************************!*\
  !*** ./src/packageMoka/pages/moka/makecard/index.vue ***!
  \*******************************************************/
/*! no exports provided */
/*! all exports used */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tarojs_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tarojs/runtime */ "./node_modules/@tarojs/runtime/dist/runtime.esm.js");
/* harmony import */ var _node_modules_tarojs_taro_loader_lib_raw_js_index_vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue */ "./node_modules/@tarojs/taro-loader/lib/raw.js!./src/packageMoka/pages/moka/makecard/index.vue");


var config = {"navigationBarTitleText":"制作模卡","usingComponents":{}};


var inst = Page(Object(_tarojs_runtime__WEBPACK_IMPORTED_MODULE_0__["createPageConfig"])(_node_modules_tarojs_taro_loader_lib_raw_js_index_vue__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"], 'packageMoka/pages/moka/makecard/index', {root:{cn:[]}}, config || {}))




/***/ }),

/***/ "./src/packageMoka/pages/moka/makecard/index.vue?vue&type=script&lang=js&":
/*!********************************************************************************!*\
  !*** ./src/packageMoka/pages/moka/makecard/index.vue?vue&type=script&lang=js& ***!
  \********************************************************************************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../node_modules/babel-loader/lib!../../../../../node_modules/vue-loader/lib??vue-loader-options!./index.vue?vue&type=script&lang=js& */ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/packageMoka/pages/moka/makecard/index.vue?vue&type=script&lang=js&");
 /* harmony default export */ __webpack_exports__["a"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"]); 

/***/ }),

/***/ "./src/packageMoka/pages/moka/makecard/index.vue?vue&type=template&id=7a937633&scoped=true&":
/*!**************************************************************************************************!*\
  !*** ./src/packageMoka/pages/moka/makecard/index.vue?vue&type=template&id=7a937633&scoped=true& ***!
  \**************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/*! exports used: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_template_id_7a937633_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib??vue-loader-options!./index.vue?vue&type=template&id=7a937633&scoped=true& */ "./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/packageMoka/pages/moka/makecard/index.vue?vue&type=template&id=7a937633&scoped=true&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_template_id_7a937633_scoped_true___WEBPACK_IMPORTED_MODULE_0__["a"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "b", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_template_id_7a937633_scoped_true___WEBPACK_IMPORTED_MODULE_0__["b"]; });



/***/ })

},[["./src/packageMoka/pages/moka/makecard/index.vue","runtime","taro","vendors","common"]]]);
//# sourceMappingURL=index.js.map