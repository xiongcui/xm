{"version":3,"file":"packageMoka/pages/moka/makesuccess/index.js","sources":["webpack:///./src/packageMoka/pages/moka/makesuccess/index.vue?55c5","webpack:///index.vue","webpack:///./src/packageMoka/pages/moka/makesuccess/index.vue?c13a","webpack:///._src_assets_images_moka_makecard_success.png","webpack:///._src_packageMoka_pages_moka_makesuccess_index.scss","webpack:///._src_packageMoka_pages_moka_makesuccess_index.vue","webpack:///./src/packageMoka/pages/moka/makesuccess/index.vue?f556","webpack:///./src/packageMoka/pages/moka/makesuccess/index.vue?e8a9"],"sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=12503a56&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"12503a56\",\n  \"30d0eba4\"\n  \n)\n\ncomponent.options.__file = \"src/packageMoka/pages/moka/makesuccess/index.vue\"\nexport default component.exports","<template>\n  <view class=\"makesuccess\">\n    <view class=\"main\">\n      <view class=\"hint\">\n        <image\n          src=\"../../../../assets/images/moka/makecard/success.png\"\n        ></image>\n        <text class=\"hint-text\">制作完成！</text>\n      </view>\n      <image\n        @tap=\"previewImage\"\n        class=\"card\"\n        mode=\"widthFix\"\n        :src=\"imageSrc\"\n        :style=\"{ width: isVertical ? 380 : 650 + 'rpx' }\"\n      ></image>\n      <view @tap=\"goIndex\" class=\"save\" v-if=\"goIndex\">返回首页</view>\n      <view @tap=\"save\" class=\"save\" v-else>保存手机相册</view>\n    </view>\n    <view class=\"modal_box_bg\" v-if=\"openSet\" @tap=\"close\">\n      <view class=\"tip_set\">\n        <view class=\"tip_set_tittle\"> 温馨提示 </view>\n        <view class=\"tip_set_content\"> 保存到相册已关闭授权，请先授权 </view>\n        <button\n          @opensetting=\"handleSetting\"\n          class=\"openSetting\"\n          openType=\"openSetting\"\n          type=\"primary\"\n        >\n          去授权\n        </button>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport \"./index.scss\";\nexport default {\n  name: \"makesuccess\",\n  data() {\n    return {\n      showloadingmore: false,\n      pageloading: true,\n      loadingmore: true,\n      isloading: false,\n      isposting: false,\n      pageshow: \"\",\n      imageSrc: \"\",\n      openSet: false,\n      isVertical: false,\n      has_qrcode: 1,\n      issave: false,\n      goIndex: false,\n      uploadData: {},\n    };\n  },\n  methods: {\n    previewImage() {},\n    handleSetting(e) {\n      if (e.detail.authSetting[\"scope.writePhotosAlbum\"]) {\n        this.openSet = false;\n        this.savaImageToPhoto();\n      } else {\n        wx.showModal({\n          title: \"警告\",\n          content: \"若不打开授权，则无法将图片保存在相册中！\",\n          showCancel: false,\n        });\n      }\n    },\n    save() {\n      let _this = this;\n      wx.getSetting({\n        success: function (t) {\n          t.authSetting[\"scope.writePhotosAlbum\"]\n            ? _this.savaImageToPhoto()\n            : wx.authorize({\n                scope: \"scope.writePhotosAlbum\",\n                success: function () {\n                  _this.savaImageToPhoto();\n                },\n                fail: function () {\n                  _this.openSet = true;\n                },\n              });\n        },\n      });\n    },\n    close() {\n      this.openSet = false;\n    },\n    savaImageToPhoto() {\n      wx.showLoading({\n        title: \"保存中...\",\n      });\n      wx.saveImageToPhotosAlbum({\n        filePath: this.imageSrc,\n        success: function (a) {\n          wx.hideLoading();\n          wx.showToast({\n            title: \"保存成功\",\n            icon: \"success\",\n            duration: 3000,\n          });\n          this.goIndex = true;\n        },\n      });\n    },\n  },\n  onLoad: function (options) {\n    this.imageSrc = wx.getStorageSync(\"successImgSrc\");\n    this.isVertical = options.isVertical;\n    this.has_qrcode = options.has_qrcode;\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", { staticClass: \"makesuccess\" }, [\n    _c(\"view\", { staticClass: \"main\" }, [\n      _c(\"view\", { staticClass: \"hint\" }, [\n        _c(\"image\", {\n          attrs: {\n            src: require(\"../../../../assets/images/moka/makecard/success.png\"),\n          },\n        }),\n        _c(\"text\", { staticClass: \"hint-text\" }, [_vm._v(\"制作完成！\")]),\n      ]),\n      _c(\"image\", {\n        staticClass: \"card\",\n        style: { width: _vm.isVertical ? 380 : 650 + \"rpx\" },\n        attrs: { mode: \"widthFix\", src: _vm.imageSrc },\n        on: { tap: _vm.previewImage },\n      }),\n      _vm.goIndex\n        ? _c(\"view\", { staticClass: \"save\", on: { tap: _vm.goIndex } }, [\n            _vm._v(\"返回首页\"),\n          ])\n        : _c(\"view\", { staticClass: \"save\", on: { tap: _vm.save } }, [\n            _vm._v(\"保存手机相册\"),\n          ]),\n    ]),\n    _vm.openSet\n      ? _c(\"view\", { staticClass: \"modal_box_bg\", on: { tap: _vm.close } }, [\n          _c(\"view\", { staticClass: \"tip_set\" }, [\n            _c(\"view\", { staticClass: \"tip_set_tittle\" }, [\n              _vm._v(\" 温馨提示 \"),\n            ]),\n            _c(\"view\", { staticClass: \"tip_set_content\" }, [\n              _vm._v(\" 保存到相册已关闭授权，请先授权 \"),\n            ]),\n            _c(\n              \"button\",\n              {\n                staticClass: \"openSetting\",\n                attrs: { openType: \"openSetting\", type: \"primary\" },\n                on: { opensetting: _vm.handleSetting },\n              },\n              [_vm._v(\" 去授权 \")]\n            ),\n          ]),\n        ])\n      : _vm._e(),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","module.exports = __webpack_public_path__ + \"assets/images/moka/makecard/success.png\";","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'packageMoka/pages/moka/makesuccess/index', {root:{cn:[]}}, config || {}))\n\n\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=12503a56&scoped=true&\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AAbA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAVA;AAYA;AAnDA;AAqDA;AACA;AACA;AACA;AACA;AA5EA;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACrDA;;;;;;;;;;;ACAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}