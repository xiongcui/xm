{"version":3,"file":"packageAdd/pages/user/inviteGift/index.js","sources":["webpack:///./src/packageAdd/pages/user/inviteGift/index.vue?56bd","webpack:///index.vue","webpack:///./src/packageAdd/pages/user/inviteGift/index.vue?1513","webpack:///._src_assets_images_invite-gift.jpg","webpack:///._src_packageAdd_pages_user_inviteGift_index.scss","webpack:///._src_packageAdd_pages_user_inviteGift_index.vue","webpack:///./src/packageAdd/pages/user/inviteGift/index.vue?0ed8","webpack:///./src/packageAdd/pages/user/inviteGift/index.vue?271f"],"sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6cca404c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"6cca404c\",\n  \"f8d8e6b0\"\n  \n)\n\ncomponent.options.__file = \"src/packageAdd/pages/user/inviteGift/index.vue\"\nexport default component.exports","<template>\n  <view class=\"invite-gift\">\n    <image\n      class=\"invite-img\"\n      src=\"../../../../assets/images/invite-gift.jpg\"\n      mode=\"widthFix\"\n    ></image>\n    <view\n      class=\"invite-gift-fixed\"\n      :class=\"isIphoneX ? 'fix-iphonex-button' : ''\"\n    >\n      <view class=\"invite-gift-txt\"\n        >已累计邀请{{ user_cnt }}人，获得100元现金，获得{{\n          coin_sum\n        }}个金币</view\n      >\n      <view class=\"detail-btn\">查看邀请明细</view>\n      <view class=\"invite-friends\" @tap=\"invite\">立即邀请好友</view>\n    </view>\n    <view class=\"invite-mask\" v-if=\"visible\">\n      <view class=\"mask-box\">\n        <view class=\"mask-title\">\n          <view class=\"close\" @tap=\"close\"></view>\n        </view>\n        <view class=\"mask-ct\">\n          <view class=\"mask-item\">\n            <image\n              src=\"https://yuepai-oss.qubeitech.com/static/images/wchat.png\"\n              mode=\"aspectFill\"\n            ></image>\n            <button open-type=\"share\" class=\"share-btn\">\n              <view class=\"mask-rt\">\n                <view class=\"mask-share\">分享微信</view>\n                <view class=\"mask-share-p\">分享到群聊或微信好友</view>\n              </view>\n            </button>\n          </view>\n          <view class=\"mask-item\" @tap=\"generatePoster\">\n            <image\n              src=\"https://yuepai-oss.qubeitech.com/static/images/tupian.png\"\n              mode=\"aspectFill\"\n            ></image>\n            <view class=\"mask-rt\">\n              <view class=\"mask-share\">生成海报</view>\n              <view class=\"mask-share-p\">生成含有推广码的宣传海报</view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n    <view class=\"invite-mask\" v-if=\"imgVisible\" @tap=\"imgClose\">\n      <view class=\"mask-img-box\">\n        <image :src=\"imageUrl\" mode=\"heightFix\" class=\"mask-img\"></image>\n        <view class=\"mask-save\" @tap=\"clickSaveImg\">保存到相册</view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport \"./index.scss\";\nimport {\n  inviteImage,\n  shareInvite,\n  shareInviteInfo,\n} from \"../../../../api/index\";\nexport default {\n  name: \"inviteGift\",\n  data() {\n    return {\n      visible: false,\n      imgVisible: false,\n      imageUrl: \"\",\n      isIphoneX: false,\n      imageUrl: \"\",\n      shareTitle: \"\",\n      shareImg: \"\",\n      sharePath: \"\",\n      list: [],\n      user_cnt: 0,\n      coin_sum: 0,\n    };\n  },\n  methods: {\n    invite() {\n      this.visible = true;\n    },\n    close() {\n      this.visible = false;\n    },\n    imgClose() {\n      this.imgVisible = false;\n    },\n    generatePoster() {\n      this.inviteImage({\n        source: \"share_friend\",\n        type: \"poster\",\n      });\n    },\n    clickSaveImg() {\n      //先授权相册\n      wx.getSetting({\n        success: (res) => {\n          if (!res.authSetting[\"scope.writePhotosAlbum\"]) {\n            //未授权的话发起授权\n            wx.authorize({\n              scope: \"scope.writePhotosAlbum\",\n              success: () => {\n                //用户允许授权，保存到相册\n                this.saveImg();\n              },\n              fail: () => {\n                //用户拒绝授权，然后就引导授权（这里的话如果用户拒绝，不会立马弹出引导授权界面，坑就是上边所说的官网原因）\n                wx.openSetting({\n                  success: () => {\n                    wx.authorize({\n                      scope: \"scope.writePhotosAlbum\",\n                      succes: () => {\n                        //授权成功，保存图片\n                        this.saveImg();\n                      },\n                    });\n                  },\n                });\n              },\n            });\n          } else {\n            //已经授权\n            this.saveImg();\n          }\n        },\n      });\n    },\n    saveImg() {\n      //保存到相册\n      let url = this.imageUrl;\n      wx.downloadFile({\n        //这里如果有报错就按照上边的解决方案来处理\n        url: url,\n        success: (res) => {\n          wx.saveImageToPhotosAlbum({\n            filePath: res.tempFilePath,\n            success: (res) => {\n              wx.showToast({\n                title: \"保存成功！\",\n              });\n            },\n            faile: (err) => {\n              console.log(\"失败！\");\n            },\n          });\n        },\n      });\n    },\n    async inviteImage(params) {\n      try {\n        let res = await inviteImage(params);\n        this.visible = false;\n        this.imgVisible = true;\n        this.imageUrl = res.data.data;\n      } catch (error) {}\n    },\n    async shareInvite(params) {\n      try {\n        let res = await shareInvite(params);\n      } catch (error) {}\n    },\n    async shareInviteInfo(params) {\n      try {\n        let res = await shareInviteInfo(params);\n        this.shareTitle = res.data.data.title;\n        this.shareImg = res.data.data.imageUrl;\n        this.sharePath = res.data.data.path;\n      } catch (error) {}\n    },\n    async shareInviteList(params) {\n      try {\n        let res = await shareInviteList(params);\n        this.list = res.data.data.items;\n        this.user_cnt = res.data.data.total.user_cnt;\n        this.coin_sum = res.data.data.total.coin_sum;\n      } catch (error) {}\n    },\n  },\n  onShareAppMessage() {\n    this.shareInvite({\n      source: \"share_friend\",\n      type: \"wechat\",\n    });\n    return {\n      title: this.shareTitle,\n      imageUrl: this.shareImg,\n      path: this.sharePath, // 路径，传递参数到指定页面。\n    };\n  },\n  onShareTimeline() {\n    return {\n      title: this.shareTitle,\n      imageUrl: this.shareImg,\n      path: this.sharePath, // 路径，传递参数到指定页面。\n    };\n  },\n  created() {\n    this.isIphoneX = this.globalData.isIphoneX;\n  },\n  mounted() {\n    this.shareInviteInfo({\n      source: \"share_friend\",\n      type: \"wechat\",\n    });\n    this.shareInviteList(\"\");\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", { staticClass: \"invite-gift\" }, [\n    _c(\"image\", {\n      staticClass: \"invite-img\",\n      attrs: {\n        src: require(\"../../../../assets/images/invite-gift.jpg\"),\n        mode: \"widthFix\",\n      },\n    }),\n    _c(\n      \"view\",\n      {\n        staticClass: \"invite-gift-fixed\",\n        class: _vm.isIphoneX ? \"fix-iphonex-button\" : \"\",\n      },\n      [\n        _c(\"view\", { staticClass: \"invite-gift-txt\" }, [\n          _vm._v(\n            \"已累计邀请\" +\n              _vm._s(_vm.user_cnt) +\n              \"人，获得100元现金，获得\" +\n              _vm._s(_vm.coin_sum) +\n              \"个金币\"\n          ),\n        ]),\n        _c(\"view\", { staticClass: \"detail-btn\" }, [_vm._v(\"查看邀请明细\")]),\n        _c(\"view\", { staticClass: \"invite-friends\", on: { tap: _vm.invite } }, [\n          _vm._v(\"立即邀请好友\"),\n        ]),\n      ]\n    ),\n    _vm.visible\n      ? _c(\"view\", { staticClass: \"invite-mask\" }, [\n          _c(\"view\", { staticClass: \"mask-box\" }, [\n            _c(\"view\", { staticClass: \"mask-title\" }, [\n              _c(\"view\", { staticClass: \"close\", on: { tap: _vm.close } }),\n            ]),\n            _c(\"view\", { staticClass: \"mask-ct\" }, [\n              _c(\"view\", { staticClass: \"mask-item\" }, [\n                _c(\"image\", {\n                  attrs: {\n                    src: \"https://yuepai-oss.qubeitech.com/static/images/wchat.png\",\n                    mode: \"aspectFill\",\n                  },\n                }),\n                _c(\n                  \"button\",\n                  { staticClass: \"share-btn\", attrs: { \"open-type\": \"share\" } },\n                  [\n                    _c(\"view\", { staticClass: \"mask-rt\" }, [\n                      _c(\"view\", { staticClass: \"mask-share\" }, [\n                        _vm._v(\"分享微信\"),\n                      ]),\n                      _c(\"view\", { staticClass: \"mask-share-p\" }, [\n                        _vm._v(\"分享到群聊或微信好友\"),\n                      ]),\n                    ]),\n                  ]\n                ),\n              ]),\n              _c(\n                \"view\",\n                { staticClass: \"mask-item\", on: { tap: _vm.generatePoster } },\n                [\n                  _c(\"image\", {\n                    attrs: {\n                      src: \"https://yuepai-oss.qubeitech.com/static/images/tupian.png\",\n                      mode: \"aspectFill\",\n                    },\n                  }),\n                  _c(\"view\", { staticClass: \"mask-rt\" }, [\n                    _c(\"view\", { staticClass: \"mask-share\" }, [\n                      _vm._v(\"生成海报\"),\n                    ]),\n                    _c(\"view\", { staticClass: \"mask-share-p\" }, [\n                      _vm._v(\"生成含有推广码的宣传海报\"),\n                    ]),\n                  ]),\n                ]\n              ),\n            ]),\n          ]),\n        ])\n      : _vm._e(),\n    _vm.imgVisible\n      ? _c(\"view\", { staticClass: \"invite-mask\", on: { tap: _vm.imgClose } }, [\n          _c(\"view\", { staticClass: \"mask-img-box\" }, [\n            _c(\"image\", {\n              staticClass: \"mask-img\",\n              attrs: { src: _vm.imageUrl, mode: \"heightFix\" },\n            }),\n            _c(\n              \"view\",\n              { staticClass: \"mask-save\", on: { tap: _vm.clickSaveImg } },\n              [_vm._v(\"保存到相册\")]\n            ),\n          ]),\n        ])\n      : _vm._e(),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","module.exports = __webpack_public_path__ + \"assets/images/invite-gift.jpg\";","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {\"navigationBarTitleText\":\"邀请有礼\"};\n\n\nvar inst = Page(createPageConfig(component, 'packageAdd/pages/user/inviteGift/index', {root:{cn:[]}}, config || {}))\n\n\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=6cca404c&scoped=true&\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsCA;AACA;AAKA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AATA;AAWA;AAnBA;AAqBA;AACA;AACA;AACA;AACA;AA7BA;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AATA;AAWA;AAfA;AAiBA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AALA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AAFA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AALA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AA5FA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AA4FA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AALA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAnGA;AAqGA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAJA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAjJA;;;;;;;;;;;;;AClEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1GA;;;;;;;;;;;ACAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}