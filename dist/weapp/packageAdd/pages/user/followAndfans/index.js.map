{"version":3,"file":"packageAdd/pages/user/followAndfans/index.js","sources":["webpack:///./src/packageAdd/pages/user/followAndfans/index.vue?f1b1","webpack:///index.vue","webpack:///./src/packageAdd/pages/user/followAndfans/index.vue?0015","webpack:///._src_packageAdd_pages_user_followAndfans_index.scss","webpack:///._src_packageAdd_pages_user_followAndfans_index.vue","webpack:///./src/packageAdd/pages/user/followAndfans/index.vue?0578","webpack:///./src/packageAdd/pages/user/followAndfans/index.vue?b9df"],"sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=fc1a9a4a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"fc1a9a4a\",\n  \"33882b4d\"\n  \n)\n\ncomponent.options.__file = \"src/packageAdd/pages/user/followAndfans/index.vue\"\nexport default component.exports","<template>\n  <view class=\"followAndfans\">\n    <view class=\"tab\">\n      <view\n        class=\"tab-item\"\n        :class=\"currentTab == 0 ? 'on' : ''\"\n        @tap=\"changeItem(0, 'follow')\"\n        >关注</view\n      >\n      <view\n        class=\"tab-item\"\n        :class=\"currentTab == 1 ? 'on' : ''\"\n        @tap=\"changeItem(1, 'fans')\"\n        >粉丝</view\n      >\n    </view>\n    <view class=\"content\">\n      <swiper\n        :current=\"currentTab\"\n        class=\"swiper-box\"\n        duration=\"300\"\n        @change=\"bindChange\"\n      >\n        <swiper-item>\n          <scroll-view\n            :scroll-y=\"true\"\n            @scrolltolower=\"scrollToLower\"\n            :lower-threshold=\"200\"\n            :style=\"{ height: winHeight + 'px' }\"\n          >\n            <block v-if=\"list.length\">\n              <view\n                class=\"follow_and_fans_box\"\n                v-for=\"(item, index) in list\"\n                :key=\"index\"\n              >\n                <view class=\"follow_and_fans_left\">\n                  <image\n                    :src=\"\n                      item.avatar\n                        ? item.avatar\n                        : 'https://yuepai-oss.qubeitech.com/static/avatar_default.png'\n                    \"\n                    class=\"avatar\"\n                  ></image>\n                  <view class=\"follow_and_fans_info\">\n                    <text class=\"follow_and_fans_nickname\">{{\n                      item.nickname\n                    }}</text>\n                    <text class=\"follow_and_fans_identity\">{{\n                      item.career_list.join(\"|\")\n                    }}</text>\n                  </view>\n                </view>\n                <view class=\"follow_and_fans_rt\">\n                  <view\n                    v-if=\"item.is_followed == 0\"\n                    class=\"followed_btn\"\n                    @tap=\"unfollow(item)\"\n                    >已关注</view\n                  >\n                  <view\n                    v-if=\"item.is_followed == 1\"\n                    @tap=\"unfollow(item)\"\n                    class=\"followed_btn\"\n                    >互相关注</view\n                  >\n                </view>\n              </view>\n            </block>\n            <view v-else class=\"none-data\">\n              <image\n                src=\"https://yuepai-oss.qubeitech.com/static/common/none.png\"\n                mode=\"aspectFill\"\n                class=\"none-img\"\n              ></image>\n              <view>当前暂无信息哦～</view>\n            </view>\n          </scroll-view>\n        </swiper-item>\n        <swiper-item>\n          <scroll-view\n            :scroll-y=\"true\"\n            @scrolltolower=\"scrollToLower\"\n            :lower-threshold=\"200\"\n            :style=\"{ height: winHeight + 'px' }\"\n          >\n            <block v-if=\"list.length\">\n              <view\n                class=\"follow_and_fans_box\"\n                v-for=\"(item, index) in list\"\n                :key=\"index\"\n              >\n                <view class=\"follow_and_fans_left\">\n                  <image\n                    :src=\"\n                      item.avatar\n                        ? item.avatar\n                        : 'https://yuepai-oss.qubeitech.com/static/avatar_default.png'\n                    \"\n                    class=\"avatar\"\n                  ></image>\n                  <view class=\"follow_and_fans_info\">\n                    <text class=\"follow_and_fans_nickname\">{{\n                      item.nickname\n                    }}</text>\n                    <text class=\"follow_and_fans_identity\">{{\n                      item.career_list.join(\"|\")\n                    }}</text>\n                  </view>\n                </view>\n                <view class=\"follow_and_fans_rt\">\n                  <view\n                    v-if=\"item.is_follower == 0\"\n                    class=\"followed_btn_red\"\n                    @tap=\"follow(item)\"\n                    >回粉</view\n                  >\n                  <view\n                    v-if=\"item.is_follower == 1\"\n                    class=\"followed_btn\"\n                    @tap=\"unfollow(item)\"\n                    >互相关注</view\n                  >\n                </view>\n              </view>\n            </block>\n            <view v-else class=\"none-data\">\n              <image\n                src=\"https://yuepai-oss.qubeitech.com/static/common/none.png\"\n                mode=\"aspectFill\"\n                class=\"none-img\"\n              ></image>\n              <view>当前暂无信息哦～</view>\n            </view>\n          </scroll-view>\n        </swiper-item>\n      </swiper>\n    </view>\n  </view>\n</template>\n\n<script>\nimport \"./index.scss\";\nimport {\n  followerList,\n  followedList,\n  userFollow,\n  userUnfollow,\n} from \"../../../../api/index\";\nexport default {\n  name: \"followAndfans\",\n  data() {\n    return {\n      currentTab: 0,\n      // 页面配置\n      winWidth: 0,\n      winHeight: 0,\n      list: [],\n      type: \"follow\",\n      pageNum: 1,\n      pageSize: 10,\n    };\n  },\n  methods: {\n    // 点击tab切换\n    changeItem(index, type) {\n      if (this.currentTab === index) {\n        return false;\n      } else {\n        this.currentTab = index;\n        this.type = type;\n        this.pageNum = 1;\n        this.list = [];\n        this.query();\n      }\n    },\n    bindChange(e) {\n      this.currentTab = e.detail.current;\n    },\n    scrollToLower() {\n      this.pageNum++;\n      this.query();\n    },\n    follow(row) {\n      this.userFollow({\n        follow_uuid: row.followed_id || row.follower_id,\n      });\n    },\n    unfollow(row) {\n      let _this = this;\n      wx.showModal({\n        title: \"温馨提示\",\n        content: \"确定不再关注？\",\n        success: function (res) {\n          if (res.confirm) {\n            console.log(\"用户点击确定\");\n            _this.userUnfollow({\n              unfollow_uuid: row.followed_id || row.follower_id,\n            });\n          } else if (res.cancel) {\n            console.log(\"用户点击取消\");\n          }\n        },\n      });\n    },\n    query() {\n      let params = {\n        page: this.pageNum,\n        per_page: this.pageSize,\n      };\n      if (this.type == \"follow\") {\n        this.followerList(params);\n      } else {\n        this.followedList(params);\n      }\n    },\n    async followerList(params) {\n      try {\n        let res = await followerList(params);\n        if (!res.data.data.items || !res.data.data.items.length) {\n          errortip(\"没有更多数据了～\");\n          return false;\n        }\n        let data = res.data.data.items;\n        this.list = this.list.concat(data);\n      } catch (error) {}\n    },\n    async followedList(params) {\n      try {\n        let res = await followedList(params);\n        if (!res.data.data.items || !res.data.data.items.length) {\n          errortip(\"没有更多数据了～\");\n          return false;\n        }\n        let data = res.data.data.items;\n        this.list = this.list.concat(data);\n      } catch (error) {}\n    },\n    async userFollow(params) {\n      try {\n        let res = await userFollow(params);\n        this.list = [];\n        this.query();\n      } catch (error) {}\n    },\n    async userUnfollow(params) {\n      try {\n        let res = await userUnfollow(params);\n        this.list = [];\n        this.query();\n      } catch (error) {}\n    },\n  },\n  onLoad: function (options) {\n    if (options.type) {\n      this.type = options.type;\n      if (this.type == \"follow\") {\n        this.currentTab = 0;\n      } else {\n        this.currentTab = 1;\n      }\n    }\n    var that = this;\n    // 获取系统信息\n    wx.getSystemInfo({\n      success: function (res) {\n        that.winWidth = res.windowWidth;\n        that.winHeight = res.windowHeight;\n      },\n    });\n    this.query();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", { staticClass: \"followAndfans\" }, [\n    _c(\"view\", { staticClass: \"tab\" }, [\n      _c(\n        \"view\",\n        {\n          staticClass: \"tab-item\",\n          class: _vm.currentTab == 0 ? \"on\" : \"\",\n          on: {\n            tap: function ($event) {\n              return _vm.changeItem(0, \"follow\")\n            },\n          },\n        },\n        [_vm._v(\"关注\")]\n      ),\n      _c(\n        \"view\",\n        {\n          staticClass: \"tab-item\",\n          class: _vm.currentTab == 1 ? \"on\" : \"\",\n          on: {\n            tap: function ($event) {\n              return _vm.changeItem(1, \"fans\")\n            },\n          },\n        },\n        [_vm._v(\"粉丝\")]\n      ),\n    ]),\n    _c(\n      \"view\",\n      { staticClass: \"content\" },\n      [\n        _c(\n          \"swiper\",\n          {\n            staticClass: \"swiper-box\",\n            attrs: { current: _vm.currentTab, duration: \"300\" },\n            on: { change: _vm.bindChange },\n          },\n          [\n            _c(\n              \"swiper-item\",\n              [\n                _c(\n                  \"scroll-view\",\n                  {\n                    style: { height: _vm.winHeight + \"px\" },\n                    attrs: { \"scroll-y\": true, \"lower-threshold\": 200 },\n                    on: { scrolltolower: _vm.scrollToLower },\n                  },\n                  [\n                    _vm.list.length\n                      ? _c(\n                          \"block\",\n                          _vm._l(_vm.list, function (item, index) {\n                            return _c(\n                              \"view\",\n                              {\n                                key: index,\n                                staticClass: \"follow_and_fans_box\",\n                              },\n                              [\n                                _c(\n                                  \"view\",\n                                  { staticClass: \"follow_and_fans_left\" },\n                                  [\n                                    _c(\"image\", {\n                                      staticClass: \"avatar\",\n                                      attrs: {\n                                        src: item.avatar\n                                          ? item.avatar\n                                          : \"https://yuepai-oss.qubeitech.com/static/avatar_default.png\",\n                                      },\n                                    }),\n                                    _c(\n                                      \"view\",\n                                      { staticClass: \"follow_and_fans_info\" },\n                                      [\n                                        _c(\n                                          \"text\",\n                                          {\n                                            staticClass:\n                                              \"follow_and_fans_nickname\",\n                                          },\n                                          [_vm._v(_vm._s(item.nickname))]\n                                        ),\n                                        _c(\n                                          \"text\",\n                                          {\n                                            staticClass:\n                                              \"follow_and_fans_identity\",\n                                          },\n                                          [\n                                            _vm._v(\n                                              _vm._s(item.career_list.join(\"|\"))\n                                            ),\n                                          ]\n                                        ),\n                                      ]\n                                    ),\n                                  ]\n                                ),\n                                _c(\n                                  \"view\",\n                                  { staticClass: \"follow_and_fans_rt\" },\n                                  [\n                                    item.is_followed == 0\n                                      ? _c(\n                                          \"view\",\n                                          {\n                                            staticClass: \"followed_btn\",\n                                            on: {\n                                              tap: function ($event) {\n                                                return _vm.unfollow(item)\n                                              },\n                                            },\n                                          },\n                                          [_vm._v(\"已关注\")]\n                                        )\n                                      : _vm._e(),\n                                    item.is_followed == 1\n                                      ? _c(\n                                          \"view\",\n                                          {\n                                            staticClass: \"followed_btn\",\n                                            on: {\n                                              tap: function ($event) {\n                                                return _vm.unfollow(item)\n                                              },\n                                            },\n                                          },\n                                          [_vm._v(\"互相关注\")]\n                                        )\n                                      : _vm._e(),\n                                  ]\n                                ),\n                              ]\n                            )\n                          }),\n                          0\n                        )\n                      : _c(\"view\", { staticClass: \"none-data\" }, [\n                          _c(\"image\", {\n                            staticClass: \"none-img\",\n                            attrs: {\n                              src: \"https://yuepai-oss.qubeitech.com/static/common/none.png\",\n                              mode: \"aspectFill\",\n                            },\n                          }),\n                          _c(\"view\", [_vm._v(\"当前暂无信息哦～\")]),\n                        ]),\n                  ],\n                  1\n                ),\n              ],\n              1\n            ),\n            _c(\n              \"swiper-item\",\n              [\n                _c(\n                  \"scroll-view\",\n                  {\n                    style: { height: _vm.winHeight + \"px\" },\n                    attrs: { \"scroll-y\": true, \"lower-threshold\": 200 },\n                    on: { scrolltolower: _vm.scrollToLower },\n                  },\n                  [\n                    _vm.list.length\n                      ? _c(\n                          \"block\",\n                          _vm._l(_vm.list, function (item, index) {\n                            return _c(\n                              \"view\",\n                              {\n                                key: index,\n                                staticClass: \"follow_and_fans_box\",\n                              },\n                              [\n                                _c(\n                                  \"view\",\n                                  { staticClass: \"follow_and_fans_left\" },\n                                  [\n                                    _c(\"image\", {\n                                      staticClass: \"avatar\",\n                                      attrs: {\n                                        src: item.avatar\n                                          ? item.avatar\n                                          : \"https://yuepai-oss.qubeitech.com/static/avatar_default.png\",\n                                      },\n                                    }),\n                                    _c(\n                                      \"view\",\n                                      { staticClass: \"follow_and_fans_info\" },\n                                      [\n                                        _c(\n                                          \"text\",\n                                          {\n                                            staticClass:\n                                              \"follow_and_fans_nickname\",\n                                          },\n                                          [_vm._v(_vm._s(item.nickname))]\n                                        ),\n                                        _c(\n                                          \"text\",\n                                          {\n                                            staticClass:\n                                              \"follow_and_fans_identity\",\n                                          },\n                                          [\n                                            _vm._v(\n                                              _vm._s(item.career_list.join(\"|\"))\n                                            ),\n                                          ]\n                                        ),\n                                      ]\n                                    ),\n                                  ]\n                                ),\n                                _c(\n                                  \"view\",\n                                  { staticClass: \"follow_and_fans_rt\" },\n                                  [\n                                    item.is_follower == 0\n                                      ? _c(\n                                          \"view\",\n                                          {\n                                            staticClass: \"followed_btn_red\",\n                                            on: {\n                                              tap: function ($event) {\n                                                return _vm.follow(item)\n                                              },\n                                            },\n                                          },\n                                          [_vm._v(\"回粉\")]\n                                        )\n                                      : _vm._e(),\n                                    item.is_follower == 1\n                                      ? _c(\n                                          \"view\",\n                                          {\n                                            staticClass: \"followed_btn\",\n                                            on: {\n                                              tap: function ($event) {\n                                                return _vm.unfollow(item)\n                                              },\n                                            },\n                                          },\n                                          [_vm._v(\"互相关注\")]\n                                        )\n                                      : _vm._e(),\n                                  ]\n                                ),\n                              ]\n                            )\n                          }),\n                          0\n                        )\n                      : _c(\"view\", { staticClass: \"none-data\" }, [\n                          _c(\"image\", {\n                            staticClass: \"none-img\",\n                            attrs: {\n                              src: \"https://yuepai-oss.qubeitech.com/static/common/none.png\",\n                              mode: \"aspectFill\",\n                            },\n                          }),\n                          _c(\"view\", [_vm._v(\"当前暂无信息哦～\")]),\n                        ]),\n                  ],\n                  1\n                ),\n              ],\n              1\n            ),\n          ],\n          1\n        ),\n      ],\n      1\n    ),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'packageAdd/pages/user/followAndfans/index', {root:{cn:[]}}, config || {}))\n\n\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=fc1a9a4a&scoped=true&\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyHA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAGA;AACA;AACA;AACA;AAZA;AAcA;AACA;AACA;AACA;AACA;AAFA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AAGA;AAJA;AACA;AADA;AAOA;AACA;AARA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AAGA;AAJA;AACA;AADA;AAOA;AACA;AARA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AAAA;AACA;AALA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AAAA;AACA;AALA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAxFA;AA0FA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AA1HA;;;;;;;;;;;;;ACtJA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjSA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}