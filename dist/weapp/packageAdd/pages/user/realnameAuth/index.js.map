{"version":3,"file":"packageAdd/pages/user/realnameAuth/index.js","sources":["webpack:///./src/packageAdd/pages/user/realnameAuth/index.vue?99c5","webpack:///index.vue","webpack:///./src/packageAdd/pages/user/realnameAuth/index.vue?8f7f","webpack:///._src_packageAdd_pages_user_realnameAuth_index.scss","webpack:///._src_packageAdd_pages_user_realnameAuth_index.vue","webpack:///./src/packageAdd/pages/user/realnameAuth/index.vue?7d96","webpack:///./src/packageAdd/pages/user/realnameAuth/index.vue?fd85"],"sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=280e1af2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"280e1af2\",\n  \"468ecc40\"\n  \n)\n\ncomponent.options.__file = \"src/packageAdd/pages/user/realnameAuth/index.vue\"\nexport default component.exports","<template>\n  <view class=\"realname\">\n    <view class=\"realname_info\" v-show=\"pageShow == 'uploadimg'\">\n      <view class=\"realname_title\">\n        <image\n          src=\"https://yuepai-oss.qubeitech.com/static/images/user/realname/sfz.jpg\"\n        ></image>\n        请上传身份证的正反面\n      </view>\n      <view class=\"realname_tips\">\n        <image\n          src=\"https://yuepai-oss.qubeitech.com/static/images/common/warn_icon.png\"\n        ></image>\n        请确保二代身份证有效、并且头像文字清晰，四角对齐，无反光、无遮挡。\n      </view>\n      <view class=\"card_identity\">\n        <image\n          :src=\"realname_rx\"\n          v-if=\"realname_rx\"\n          @tap=\"chooseImage(0)\"\n        ></image>\n        <image\n          v-else\n          @tap=\"chooseImage(0)\"\n          src=\"https://yuepai-oss.qubeitech.com/static/images/user/realname/card_tx.jpg\"\n        ></image>\n      </view>\n      <view class=\"card_identity\">\n        <image\n          :src=\"realname_gh\"\n          v-if=\"realname_gh\"\n          @tap=\"chooseImage(1)\"\n        ></image>\n        <image\n          v-else\n          @tap=\"chooseImage(1)\"\n          src=\"https://yuepai-oss.qubeitech.com/static/images/user/realname/card_gh.jpg\"\n        ></image>\n      </view>\n      <view class=\"realname_btn\" @tap=\"next\">下一步</view>\n    </view>\n    <view class=\"realname_info\" v-show=\"pageShow == 'info'\">\n      <view class=\"realname_title realname_info\">\n        识别到以下信息，点击可进行修改\n      </view>\n      <view class=\"realname_form\">\n        <view class=\"label\"> 真实姓名 </view>\n        <input\n          class=\"realname-input\"\n          placeholder=\"请输入真实姓名\"\n          v-model=\"realname\"\n        />\n      </view>\n      <view class=\"realname_form\">\n        <view class=\"label\"> 身份证号 </view>\n        <input\n          class=\"realname-input\"\n          placeholder=\"请输入身份证号\"\n          v-model=\"card\"\n        />\n      </view>\n      <view class=\"realname_txt\">\n        <image\n          src=\"https://yuepai-oss.qubeitech.com/static/images/user/realname/safety.png\"\n        ></image>\n        认证信息已加密 仅用于匹配认证信息\n      </view>\n      <view class=\"realname_box_btn\">\n        <view class=\"re_upload\" @tap=\"reupload\">重新上传</view>\n        <view class=\"realname_btn\" @tap=\"submit\">确认提交</view>\n      </view>\n      <!-- <view class=\"realname_btn\">确认提交</view> -->\n    </view>\n  </view>\n</template>\n\n<script>\nimport \"./index.scss\";\nimport { ocrCard, idcardInfo, ocrIdcard } from \"../../../../api/index\";\nimport { Base64 } from \"js-Base64\";\nimport { errortip, openPage } from \"../../../../utils/util\";\nexport default {\n  name: \"realnameAuth\",\n  data() {\n    return {\n      realname: \"\",\n      realname_rx: \"\",\n      realname_gh: \"\",\n      card: \"\",\n      frontfileName: \"\",\n      backfileName: \"\",\n      pageShow: \"uploadimg\",\n    };\n  },\n  methods: {\n    chooseImage(type) {\n      let _this = this;\n      wx.chooseMedia({\n        count: 1,\n        mediaType: [\"image\"],\n        sourceType: [\"album\", \"camera\"],\n        maxDuration: 30,\n        camera: \"back\",\n        success(res) {\n          wx.showLoading({\n            title: \"正在上传中\",\n          });\n          let arr = res.tempFiles;\n          var imgInfo = {};\n          arr.map(function (v, i) {\n            v[\"progress\"] = 0;\n            imgInfo = v;\n            if (type == 0) {\n              _this.uprxImgs(imgInfo, type);\n            } else {\n              _this.upghImgs(imgInfo, type);\n            }\n          });\n        },\n      });\n    },\n    uprxImgs(dataInfo, type) {\n      let header = {};\n      let token = wx.getStorageSync(\"token\");\n      header[\"Authorization\"] = \"Basic \" + Base64.encode(token + \":\");\n      wx.showLoading({\n        title: \"上传中\",\n        mask: true,\n      });\n      wx.uploadFile({\n        url: \"https://pai.qubeitech.com/v1/file/upload\",\n        filePath: dataInfo.tempFilePath,\n        formData: {\n          scr_type: \"idcard\",\n        },\n        name: \"file\",\n        header,\n        success: (res) => {\n          wx.hideLoading();\n          //判断上传的是图片还是视频\n          let data = JSON.parse(res.data);\n          if (data.code == 200) {\n            this.realname_rx = data.data.file1;\n            this.frontfileName = data.data.file_name1;\n            this.ocrCard(\n              {\n                id_card_filename: data.data.file_name1,\n                id_card_side: \"front\",\n              },\n              type\n            );\n          } else {\n            wx.showToast({\n              title: \"上传失败！\",\n              icon: \"none\",\n            });\n          }\n        },\n      });\n    },\n    upghImgs(dataInfo, type) {\n      let header = {};\n      let token = wx.getStorageSync(\"token\");\n      header[\"Authorization\"] = \"Basic \" + Base64.encode(token + \":\");\n      wx.showLoading({\n        title: \"上传中\",\n        mask: true,\n      });\n      wx.uploadFile({\n        url: \"https://pai.qubeitech.com/v1/file/upload\",\n        filePath: dataInfo.tempFilePath,\n        formData: {\n          scr_type: \"photo\",\n        },\n        name: \"file\",\n        header,\n        success: (res) => {\n          wx.hideLoading();\n          //判断上传的是图片还是视频\n          let data = JSON.parse(res.data);\n          if (data.code == 200) {\n            this.realname_gh = data.data.file1;\n            this.backfileName = data.data.file_name1;\n            this.ocrCard(\n              {\n                id_card_filename: data.data.file_name1,\n                id_card_side: \"back\",\n              },\n              type\n            );\n          } else {\n            wx.showToast({\n              title: \"上传失败！\",\n              icon: \"none\",\n            });\n          }\n        },\n      });\n    },\n    next() {\n      if (this.realname_rx && this.realname_gh) {\n        this.pageShow = \"info\";\n        this.idcardInfo(\"\");\n      } else {\n        errortip(\"请先上传身份证\");\n      }\n    },\n    reupload() {\n      this.pageShow = \"uploadimg\";\n    },\n    submit() {\n      this.ocrIdcard({\n        id_name: this.realname,\n        id_no: this.card,\n      });\n    },\n    async ocrCard(params) {\n      try {\n        let res = await ocrCard(params);\n        if (res.data.data.id_card_front) {\n          this.realname = res.data.data.id_name;\n          this.card = res.data.data.id_no;\n        }\n      } catch (error) {}\n    },\n    async idcardInfo(params) {\n      try {\n        let res = await idcardInfo(params);\n        if (res.data.data.id_card_front) {\n          this.realname = res.data.data.id_name;\n          this.card = res.data.data.id_no;\n        }\n      } catch (error) {}\n    },\n    async ocrIdcard(params) {\n      try {\n        let res = await ocrIdcard(params);\n        let userInfo = wx.getStorageSync(\"userInfo\");\n        openPage(\n          \"/packageAdd/pages/user/baiduRealnameAuth/index?verify_token=\" +\n            res.data.data.verify_token +\n            \"&uuid=\" +\n            userInfo.uuid\n        );\n      } catch (error) {}\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", { staticClass: \"realname\" }, [\n    _c(\n      \"view\",\n      {\n        directives: [\n          {\n            name: \"show\",\n            rawName: \"v-show\",\n            value: _vm.pageShow == \"uploadimg\",\n            expression: \"pageShow == 'uploadimg'\",\n          },\n        ],\n        staticClass: \"realname_info\",\n      },\n      [\n        _c(\"view\", { staticClass: \"realname_title\" }, [\n          _c(\"image\", {\n            attrs: {\n              src: \"https://yuepai-oss.qubeitech.com/static/images/user/realname/sfz.jpg\",\n            },\n          }),\n          _vm._v(\" 请上传身份证的正反面 \"),\n        ]),\n        _c(\"view\", { staticClass: \"realname_tips\" }, [\n          _c(\"image\", {\n            attrs: {\n              src: \"https://yuepai-oss.qubeitech.com/static/images/common/warn_icon.png\",\n            },\n          }),\n          _vm._v(\n            \" 请确保二代身份证有效、并且头像文字清晰，四角对齐，无反光、无遮挡。 \"\n          ),\n        ]),\n        _c(\"view\", { staticClass: \"card_identity\" }, [\n          _vm.realname_rx\n            ? _c(\"image\", {\n                attrs: { src: _vm.realname_rx },\n                on: {\n                  tap: function ($event) {\n                    return _vm.chooseImage(0)\n                  },\n                },\n              })\n            : _c(\"image\", {\n                attrs: {\n                  src: \"https://yuepai-oss.qubeitech.com/static/images/user/realname/card_tx.jpg\",\n                },\n                on: {\n                  tap: function ($event) {\n                    return _vm.chooseImage(0)\n                  },\n                },\n              }),\n        ]),\n        _c(\"view\", { staticClass: \"card_identity\" }, [\n          _vm.realname_gh\n            ? _c(\"image\", {\n                attrs: { src: _vm.realname_gh },\n                on: {\n                  tap: function ($event) {\n                    return _vm.chooseImage(1)\n                  },\n                },\n              })\n            : _c(\"image\", {\n                attrs: {\n                  src: \"https://yuepai-oss.qubeitech.com/static/images/user/realname/card_gh.jpg\",\n                },\n                on: {\n                  tap: function ($event) {\n                    return _vm.chooseImage(1)\n                  },\n                },\n              }),\n        ]),\n        _c(\"view\", { staticClass: \"realname_btn\", on: { tap: _vm.next } }, [\n          _vm._v(\"下一步\"),\n        ]),\n      ]\n    ),\n    _c(\n      \"view\",\n      {\n        directives: [\n          {\n            name: \"show\",\n            rawName: \"v-show\",\n            value: _vm.pageShow == \"info\",\n            expression: \"pageShow == 'info'\",\n          },\n        ],\n        staticClass: \"realname_info\",\n      },\n      [\n        _c(\"view\", { staticClass: \"realname_title realname_info\" }, [\n          _vm._v(\" 识别到以下信息，点击可进行修改 \"),\n        ]),\n        _c(\"view\", { staticClass: \"realname_form\" }, [\n          _c(\"view\", { staticClass: \"label\" }, [_vm._v(\" 真实姓名 \")]),\n          _c(\"input\", {\n            directives: [\n              {\n                name: \"model\",\n                rawName: \"v-model\",\n                value: _vm.realname,\n                expression: \"realname\",\n              },\n            ],\n            staticClass: \"realname-input\",\n            attrs: { placeholder: \"请输入真实姓名\" },\n            domProps: { value: _vm.realname },\n            on: {\n              input: function ($event) {\n                if ($event.target.composing) {\n                  return\n                }\n                _vm.realname = $event.target.value\n              },\n            },\n          }),\n        ]),\n        _c(\"view\", { staticClass: \"realname_form\" }, [\n          _c(\"view\", { staticClass: \"label\" }, [_vm._v(\" 身份证号 \")]),\n          _c(\"input\", {\n            directives: [\n              {\n                name: \"model\",\n                rawName: \"v-model\",\n                value: _vm.card,\n                expression: \"card\",\n              },\n            ],\n            staticClass: \"realname-input\",\n            attrs: { placeholder: \"请输入身份证号\" },\n            domProps: { value: _vm.card },\n            on: {\n              input: function ($event) {\n                if ($event.target.composing) {\n                  return\n                }\n                _vm.card = $event.target.value\n              },\n            },\n          }),\n        ]),\n        _c(\"view\", { staticClass: \"realname_txt\" }, [\n          _c(\"image\", {\n            attrs: {\n              src: \"https://yuepai-oss.qubeitech.com/static/images/user/realname/safety.png\",\n            },\n          }),\n          _vm._v(\" 认证信息已加密 仅用于匹配认证信息 \"),\n        ]),\n        _c(\"view\", { staticClass: \"realname_box_btn\" }, [\n          _c(\"view\", { staticClass: \"re_upload\", on: { tap: _vm.reupload } }, [\n            _vm._v(\"重新上传\"),\n          ]),\n          _c(\"view\", { staticClass: \"realname_btn\", on: { tap: _vm.submit } }, [\n            _vm._v(\"确认提交\"),\n          ]),\n        ]),\n      ]\n    ),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {\"navigationBarTitleText\":\"实名认证\"};\n\n\nvar inst = Page(createPageConfig(component, 'packageAdd/pages/user/realnameAuth/index', {root:{cn:[]}}, config || {}))\n\n\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=280e1af2&scoped=true&\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;AAuBA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAFA;AAMA;AACA;AACA;AACA;AAFA;AAIA;AACA;AA5BA;AA8BA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAFA;AAMA;AACA;AACA;AACA;AAFA;AAIA;AACA;AA5BA;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAPA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAPA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AAJA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAvJA;AAbA;;;;;;;;;;;;;ACjFA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC3KA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}