{"version":3,"file":"packageAdd/pages/user/unlock/index.js","sources":["webpack:///./src/packageAdd/pages/user/unlock/index.vue?aa58","webpack:///index.vue","webpack:///./src/packageAdd/pages/user/unlock/index.vue?acc6","webpack:///._src_packageAdd_pages_user_unlock_index.scss","webpack:///._src_packageAdd_pages_user_unlock_index.vue","webpack:///./src/packageAdd/pages/user/unlock/index.vue?6c0d","webpack:///./src/packageAdd/pages/user/unlock/index.vue?5f71"],"sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=dfe14ef6&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"dfe14ef6\",\n  \"040a9c53\"\n  \n)\n\ncomponent.options.__file = \"src/packageAdd/pages/user/unlock/index.vue\"\nexport default component.exports","<template>\n  <view class=\"unlock-list\">\n    <view class=\"unlock-item\" v-for=\"(item, index) in list\" :key=\"index\">\n      <view class=\"unlock-left\">\n        <image :src=\"item.unlock_avatar\"></image>\n        <view class=\"unlock-info\">\n          <view class=\"unlock-title\">\n            <text>{{ item.unlock_nickname }}</text>\n            <block>\n              <image\n                src=\"https://yuepai-oss.qubeitech.com/static/images/boy.png\"\n                class=\"sex\"\n                v-if=\"item.unlock_sex == 1\"\n              ></image>\n              <image\n                src=\"https://yuepai-oss.qubeitech.com/static/images/girl.png\"\n                class=\"sex\"\n                v-if=\"item.unlock_sex == 0\"\n              ></image>\n            </block>\n          </view>\n          <view class=\"unlock-p\"> {{ item.unlock_career_label }} </view>\n        </view>\n      </view>\n      <view class=\"unlock-rt\">\n        <view class=\"unlock-btn\" @tap=\"viewDetails(item.content)\">\n          {{ item.details_button }}\n        </view>\n      </view>\n    </view>\n    <view class=\"unlock\" v-if=\"unlockSuccessVisible\" @tap=\"closeSuccess\">\n      <view class=\"unlock-modal\">\n        <view class=\"unlock-success-box\">\n          <view class=\"unlock-success-title\">\n            解锁信息\n            <view class=\"close-img\">\n              <image\n                src=\"https://yuepai-oss.qubeitech.com/static/images/common/x_icon.png\"\n                @tap.stop=\"closeSuccess\"\n              ></image> </view\n          ></view>\n          <view class=\"unlock-success-item\" v-if=\"mobile\">\n            <view class=\"unlock-success-left\">\n              <text class=\"unlock-label\">手机号：</text>\n              <text class=\"unlock-txt\">{{ mobile }}</text>\n            </view>\n            <view class=\"unlock-success-rt\" @tap.stop=\"copy(mobile)\">\n              复制\n            </view>\n          </view>\n          <view class=\"unlock-success-item\" v-if=\"wechat\">\n            <view class=\"unlock-success-left\">\n              <text class=\"unlock-label\">微信号：</text>\n              <text class=\"unlock-txt\">{{ wechat }}</text>\n            </view>\n            <view class=\"unlock-success-rt\" @tap.stop=\"copy(wechat)\">\n              复制\n            </view>\n          </view>\n          <view class=\"unlock-success-item\" v-if=\"wechatCode\">\n            <view class=\"unlock-success-left\">\n              <text class=\"unlock-label\">微信二维码：</text>\n              <image :src=\"wechatCode\"></image>\n            </view>\n            <view class=\"unlock-success-rt\" @tap.stop=\"clickSaveImg\">\n              保存\n            </view>\n          </view>\n          <view class=\"unlock-tips\">\n            提示：联系对方时，注明来自“虾米约拍”，请勿骚扰对方\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport \"./index.scss\";\nimport { unlockList } from \"../../../../api/index.js\";\nimport { errortip, platformMap } from \"../../../../utils/util\";\nexport default {\n  name: \"unlock\",\n  data() {\n    return {\n      list: [],\n      pageNum: 1,\n      pageSize: 10,\n      unlockSuccessVisible: false,\n      mobile: \"\",\n      wechat: \"\",\n      wechatCode: \"\",\n      platformMap: {},\n    };\n  },\n  methods: {\n    closeSuccess() {\n      this.unlockSuccessVisible = false;\n    },\n    viewDetails(data) {\n      this.unlockSuccessVisible = true;\n      this.mobile = data.mobile;\n      this.wechat = data.wechat_act;\n      this.wechatCode = data.wechat_qrc;\n    },\n    copy(txt) {\n      wx.setClipboardData({\n        data: txt, //这个是要复制的数据\n        success(res) {\n          wx.getClipboardData({\n            success(res) {\n              console.log(res.data); // data\n              if (res.data) {\n                errortip(\"复制成功\");\n              }\n            },\n          });\n        },\n      });\n    },\n    clickSaveImg() {\n      //先授权相册\n      wx.getSetting({\n        success: (res) => {\n          if (!res.authSetting[\"scope.writePhotosAlbum\"]) {\n            //未授权的话发起授权\n            wx.authorize({\n              scope: \"scope.writePhotosAlbum\",\n              success: () => {\n                //用户允许授权，保存到相册\n                this.saveImg();\n              },\n              fail: () => {\n                //用户拒绝授权，然后就引导授权（这里的话如果用户拒绝，不会立马弹出引导授权界面，坑就是上边所说的官网原因）\n                wx.openSetting({\n                  success: () => {\n                    wx.authorize({\n                      scope: \"scope.writePhotosAlbum\",\n                      succes: () => {\n                        //授权成功，保存图片\n                        this.saveImg();\n                      },\n                    });\n                  },\n                });\n              },\n            });\n          } else {\n            //已经授权\n            this.saveImg();\n          }\n        },\n      });\n    },\n    saveImg() {\n      //保存到相册\n      let url = this.wechatCode;\n      wx.downloadFile({\n        //这里如果有报错就按照上边的解决方案来处理\n        url: url,\n        success: (res) => {\n          wx.saveImageToPhotosAlbum({\n            filePath: res.tempFilePath,\n            success: (res) => {\n              wx.showToast({\n                title: \"保存成功！\",\n              });\n            },\n            faile: (err) => {\n              console.log(\"失败！\");\n            },\n          });\n        },\n      });\n    },\n    query() {\n      this.unlockList({\n        page: this.pageNum,\n        per_page: this.pageSize,\n      });\n    },\n    async unlockList(params) {\n      try {\n        let res = await unlockList(params);\n        if (!res.data.data || !res.data.data.items.length) {\n          errortip(\"没有更多数据了～\");\n          return false;\n        }\n        let data = res.data.data.items;\n        this.list = this.list.concat(data);\n      } catch (error) {}\n    },\n  },\n  created() {\n    this.globalData = this.globalData;\n    this.platformMap = platformMap;\n    this.query();\n  },\n  onReachBottom() {\n    this.pageNum++;\n    this.query();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"view\",\n    { staticClass: \"unlock-list\" },\n    [\n      _vm._l(_vm.list, function (item, index) {\n        return _c(\"view\", { key: index, staticClass: \"unlock-item\" }, [\n          _c(\"view\", { staticClass: \"unlock-left\" }, [\n            _c(\"image\", { attrs: { src: item.unlock_avatar } }),\n            _c(\"view\", { staticClass: \"unlock-info\" }, [\n              _c(\n                \"view\",\n                { staticClass: \"unlock-title\" },\n                [\n                  _c(\"text\", [_vm._v(_vm._s(item.unlock_nickname))]),\n                  _c(\"block\", [\n                    item.unlock_sex == 1\n                      ? _c(\"image\", {\n                          staticClass: \"sex\",\n                          attrs: {\n                            src: \"https://yuepai-oss.qubeitech.com/static/images/boy.png\",\n                          },\n                        })\n                      : _vm._e(),\n                    item.unlock_sex == 0\n                      ? _c(\"image\", {\n                          staticClass: \"sex\",\n                          attrs: {\n                            src: \"https://yuepai-oss.qubeitech.com/static/images/girl.png\",\n                          },\n                        })\n                      : _vm._e(),\n                  ]),\n                ],\n                1\n              ),\n              _c(\"view\", { staticClass: \"unlock-p\" }, [\n                _vm._v(\" \" + _vm._s(item.unlock_career_label) + \" \"),\n              ]),\n            ]),\n          ]),\n          _c(\"view\", { staticClass: \"unlock-rt\" }, [\n            _c(\n              \"view\",\n              {\n                staticClass: \"unlock-btn\",\n                on: {\n                  tap: function ($event) {\n                    return _vm.viewDetails(item.content)\n                  },\n                },\n              },\n              [_vm._v(\" \" + _vm._s(item.details_button) + \" \")]\n            ),\n          ]),\n        ])\n      }),\n      _vm.unlockSuccessVisible\n        ? _c(\"view\", { staticClass: \"unlock\", on: { tap: _vm.closeSuccess } }, [\n            _c(\"view\", { staticClass: \"unlock-modal\" }, [\n              _c(\"view\", { staticClass: \"unlock-success-box\" }, [\n                _c(\"view\", { staticClass: \"unlock-success-title\" }, [\n                  _vm._v(\" 解锁信息 \"),\n                  _c(\"view\", { staticClass: \"close-img\" }, [\n                    _c(\"image\", {\n                      attrs: {\n                        src: \"https://yuepai-oss.qubeitech.com/static/images/common/x_icon.png\",\n                      },\n                      on: {\n                        tap: function ($event) {\n                          $event.stopPropagation()\n                          return _vm.closeSuccess.apply(null, arguments)\n                        },\n                      },\n                    }),\n                  ]),\n                ]),\n                _vm.mobile\n                  ? _c(\"view\", { staticClass: \"unlock-success-item\" }, [\n                      _c(\"view\", { staticClass: \"unlock-success-left\" }, [\n                        _c(\"text\", { staticClass: \"unlock-label\" }, [\n                          _vm._v(\"手机号：\"),\n                        ]),\n                        _c(\"text\", { staticClass: \"unlock-txt\" }, [\n                          _vm._v(_vm._s(_vm.mobile)),\n                        ]),\n                      ]),\n                      _c(\n                        \"view\",\n                        {\n                          staticClass: \"unlock-success-rt\",\n                          on: {\n                            tap: function ($event) {\n                              $event.stopPropagation()\n                              return _vm.copy(_vm.mobile)\n                            },\n                          },\n                        },\n                        [_vm._v(\" 复制 \")]\n                      ),\n                    ])\n                  : _vm._e(),\n                _vm.wechat\n                  ? _c(\"view\", { staticClass: \"unlock-success-item\" }, [\n                      _c(\"view\", { staticClass: \"unlock-success-left\" }, [\n                        _c(\"text\", { staticClass: \"unlock-label\" }, [\n                          _vm._v(\"微信号：\"),\n                        ]),\n                        _c(\"text\", { staticClass: \"unlock-txt\" }, [\n                          _vm._v(_vm._s(_vm.wechat)),\n                        ]),\n                      ]),\n                      _c(\n                        \"view\",\n                        {\n                          staticClass: \"unlock-success-rt\",\n                          on: {\n                            tap: function ($event) {\n                              $event.stopPropagation()\n                              return _vm.copy(_vm.wechat)\n                            },\n                          },\n                        },\n                        [_vm._v(\" 复制 \")]\n                      ),\n                    ])\n                  : _vm._e(),\n                _vm.wechatCode\n                  ? _c(\"view\", { staticClass: \"unlock-success-item\" }, [\n                      _c(\"view\", { staticClass: \"unlock-success-left\" }, [\n                        _c(\"text\", { staticClass: \"unlock-label\" }, [\n                          _vm._v(\"微信二维码：\"),\n                        ]),\n                        _c(\"image\", { attrs: { src: _vm.wechatCode } }),\n                      ]),\n                      _c(\n                        \"view\",\n                        {\n                          staticClass: \"unlock-success-rt\",\n                          on: {\n                            tap: function ($event) {\n                              $event.stopPropagation()\n                              return _vm.clickSaveImg.apply(null, arguments)\n                            },\n                          },\n                        },\n                        [_vm._v(\" 保存 \")]\n                      ),\n                    ])\n                  : _vm._e(),\n                _c(\"view\", { staticClass: \"unlock-tips\" }, [\n                  _vm._v(\n                    \" 提示：联系对方时，注明来自“虾米约拍”，请勿骚扰对方 \"\n                  ),\n                ]),\n              ]),\n            ]),\n          ])\n        : _vm._e(),\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {\"enablePullDownRefresh\":true,\"navigationBarTitleText\":\"我的解锁\"};\n\n\nvar inst = Page(createPageConfig(component, 'packageAdd/pages/user/unlock/index', {root:{cn:[]}}, config || {}))\n\n\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=dfe14ef6&scoped=true&\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AANA;AAQA;AAXA;AAaA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AATA;AAWA;AAnBA;AAqBA;AACA;AACA;AACA;AACA;AA7BA;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AATA;AAWA;AAfA;AAiBA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AAGA;AAJA;AACA;AADA;AAOA;AACA;AARA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAhGA;AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxHA;;;;;;;;;;;;;ACjFA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxKA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}